[{"id":"1","name":"Welcome","content":"<h2 id=\"welcome\">Welcome</h2>\n<p><img src=\"assets/dt-azure.png\" alt=\"image\" /></p>\n<p>This virtual hands-on workshop will deep dive into successful modernization tactics and how Dynatrace’s AI-engine, Davis, performs automatic and intelligent root-cause analysis in hybrid cloud Azure environments.  ​</p>\n<p>By analyzing an application within Dynatrace, you’ll learn how to understand application usage patterns, infrastructure consumption, service dependencies, benchmarking performance and ensuring service levels, and enabling modern operations for cloud native architectures.</p>\n<p>Attendees can expect to learn the following from this workshop:​</p>\n<ul>\n<li>Common challenges associated with modernization​</li>\n<li>How to solve challenges of hybrid cloud with Dynatrace observability​</li>\n<li>Improve acceleration of cloud workload adoption of Azure​</li>\n</ul>\n<h2 id=\"whoshouldattend\">Who should attend:</h2>\n<ul>\n<li>Application teams</li>\n<li>Architects</li>\n<li>Developers</li>\n<li>Technical leads</li>\n</ul>\n<h2 id=\"werequireeveryattendeeto\">We require every attendee to:</h2>\n<ul>\n<li>Be able to run basic <a href=\"http://mally.stanford.edu/~sr/computing/basic-unix.html\">Unix commands</a></li>\n<li>Be familiar with basic <a href=\"https://azure.microsoft.com/en-us/overview/what-is-azure\">Azure cloud concepts</a></li>\n<li>Be familiar with <a href=\"https://azure.microsoft.com/en-us/overview/what-is-a-container/\">containerization concepts</a></li>\n</ul>","activityList":[]},{"id":"2","name":"Prerequisites","content":"<h2 id=\"prerequisites\">Prerequisites</h2>\n<p>We will now setup Dynatrace, Azure, and the workshop environment. You need all of these in place before you are presented with the lab excercises.</p>\n<h2 id=\"objectivesofthissection\">Objectives of this section</h2>\n<p>🔷 Ensure your Dynatrace account is ready</p>\n<p>🔷 Ensure your Azure subscription is ready</p>\n<p>🔷 Create and gather Dynatrace URLs &amp; Tokens</p>\n<p>🔷 Provision workshop environment and sample application</p>","activityList":[{"id":"2.1","name":"Dynatrace Tenant","content":"<h2 id=\"dynatracetenant\">Dynatrace Tenant</h2>\n<p><img src=\"assets/setup-dt-trial.png\" alt=\"image\" /></p>\n<p>For this workshop you will use a 15-day free Dynatrace evaluation of the full feature set of our all-in-one performance monitoring platform to monitor Azure resources and complete the workshop exercises.</p>\n<p>To sign up for a 15-day trial, navigate to this URL:</p>\n<ul>\n<li><a href=\"https://www.dynatrace.com/trial/?utm_medium=alliance&utm_source=azure&utm_campaign=website&utm_content=none&utm_term=none\">https://www.dynatrace.com/trial</a></li>\n</ul>\n<p>Once you sign up, you will be sent an email to set your password and it will then take about 5 minutes to provision your Dynatrace tenant.</p>","activityList":[]},{"id":"2.2","name":"Azure subscription","content":"<h2 id=\"azuresubscription\">Azure subscription</h2>\n<p>If you were provided an Azure promotion Code, navigate to Microsoft Azure Pass website:</p>\n<ul>\n<li><a href=\"https://www.microsoftazurepass.com\">https://www.microsoftazurepass.com</a></li>\n</ul>\n<p>This is what the Azure Pass site should look like:</p>\n<p><img src=\"assets/setup-azure.png\" alt=\"image\" /></p>\n<p>Using Azure Pass promotion code requires an email and the provisioning takes about 5 minutes to process.</p>\n<p>If you do not use an email without SSO with microsoft, you will need to create an account.</p>\n<p><img src=\"assets/setup-ms-account.png\" alt=\"image\" /></p>","activityList":[]},{"id":"2.3","name":"Azure Prep","content":"<h2 id=\"azureprep\">Azure Prep</h2>\n<p>In the next sections, you will complete the following:</p>\n<ul>\n<li>Open Azure Cloud Shell for running various UNIX commands</li>\n<li>Capture environment and token info needed for automation scripts</li>\n<li>Provision sample application</li>\n<li>Verify sample application is running</li>\n</ul>\n<h3 id=\"1openazurecloudshell\">1. Open Azure Cloud Shell</h3>\n<p>1 . Navigate to https://portal.azure.com/</p>\n<p>2 . Click on the Cloud Shell button</p>\n<p><img src=\"assets/setup-azure-shell-open.png\" alt=\"image\" /></p>\n<p>If you get this prompt, choose bash</p>\n<p><img src=\"assets/setup-azure-shell-bash.png\" alt=\"image\" /></p>\n<p>If you get this prompt, choose <code>Azure Pass - Sponsorship</code> and then click the <code>Create Storage</code> button.</p>\n<p><img src=\"assets/setup-azure-shell-storage.png\" alt=\"image\" /></p>\n<h3 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>Creating the storage will take about a minute.</em></p>\n<p>3 . Once the storage is created, you should see the Unix bash shell.</p>\n<p><img src=\"assets/setup-azure-shell-prompt.png\" alt=\"image\" /></p>\n<p>4 . Make a dedicated Azure shell Browser tab by clicking this new tab icon.</p>\n<p><img src=\"assets/setup-azure-shell-newtab.png\" alt=\"image\" /></p>\n<h3 id=\"2verifywhatsubscriptionyourareon\">2. Verify what subscription your are on</h3>\n<p>To see which subscription is configured for the Azure CLI, run this command.</p>\n<pre><code class=\"hljs\">az account <span class=\"hljs-keyword\">show</span>\n</code></pre>\n<p>Look for the name in the output. This is example when a promo code was used.</p>\n<pre><code class=\"hljs\">{\n  <span class=\"hljs-string\">&quot;environmentName&quot;</span>: <span class=\"hljs-string\">&quot;AzureCloud&quot;</span>,\n  <span class=\"hljs-string\">&quot;homeTenantId&quot;</span>: <span class=\"hljs-string\">&quot;xxx-xxx-xxx-xx-xxx&quot;</span>,\n  <span class=\"hljs-string\">&quot;id&quot;</span>: <span class=\"hljs-string\">&quot;yyy-yyyy-yyy-yyy-yyy&quot;</span>,\n  <span class=\"hljs-string\">&quot;isDefault&quot;</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-string\">&quot;managedByTenants&quot;</span>: [],\n  <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;Azure Pass - Sponsorship&quot;</span>,   &lt;----- This is the active subscription\n  <span class=\"hljs-string\">&quot;state&quot;</span>: <span class=\"hljs-string\">&quot;Enabled&quot;</span>,\n  <span class=\"hljs-string\">&quot;tenantId&quot;</span>: <span class=\"hljs-string\">&quot;zzz-zzz-zzz-zzz-zzz&quot;</span>,\n  <span class=\"hljs-string\">&quot;user&quot;</span>: {\n    <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;name@company.com&quot;</span>,\n    <span class=\"hljs-string\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;user&quot;</span>\n  }\n}\n</code></pre>\n<h3 id=\"technicalnote-1\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p>If the subscription is not <code>Azure Pass - Sponsorship</code>, run this command to see all the subscriptions for your user id. If this is the first time using Azure portal or a trial, then you should only have one subscription.</p>\n<pre><code class=\"hljs\">az account <span class=\"hljs-meta\">list</span> --<span class=\"hljs-meta\">output</span> <span class=\"hljs-meta\">table</span>\n</code></pre>\n<p>Here is an example output:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-type\">Name</span>                                     CloudName    SubscriptionId                        State    IsDefault\n<span class=\"hljs-comment\">---------------------------------------  -----------  ------------------------------------  -------  -----------</span>\n<span class=\"hljs-keyword\">Subscription</span> <span class=\"hljs-number\">1</span>                           AzureCloud   aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  Enabled  <span class=\"hljs-keyword\">False</span>\n<span class=\"hljs-keyword\">Subscription</span> <span class=\"hljs-number\">2</span>                           AzureCloud   bbbbbbbb-aaaa-aaaa-aaaa-aaaaaaaaaaaa  Enabled  <span class=\"hljs-keyword\">False</span>\n<span class=\"hljs-keyword\">Subscription</span> <span class=\"hljs-number\">3</span>                           AzureCloud   cccccccc-aaaa-aaaa-aaaa-aaaaaaaaaaaa  Enabled  <span class=\"hljs-keyword\">False</span>\n<span class=\"hljs-keyword\">Subscription</span> <span class=\"hljs-number\">4</span>                           AzureCloud   dddddddd-aaaa-aaaa-aaaa-aaaaaaaaaaaa  Enabled  <span class=\"hljs-keyword\">False</span>\nAzure Pass - Sponsorship                 AzureCloud   eeeeeeee-aaaa-aaaa-aaaa-aaaaaaaaaaaa  Enabled  <span class=\"hljs-keyword\">True</span>\n</code></pre>\n<p>If the <code>Azure Pass - Sponsorship</code> is not the <code>IsDefault = True</code>, then run these command to set and verify.</p>\n<pre><code class=\"hljs\"># <span class=\"hljs-keyword\">set</span> the <span class=\"hljs-keyword\">subscription</span>\naz account <span class=\"hljs-keyword\">set</span> <span class=\"hljs-comment\">--subscription &lt;YOUR PROMO SUBSCRIPTION ID&gt;</span>\n\n# verify change\naz account list <span class=\"hljs-comment\">--output table</span>\n\n# <span class=\"hljs-type\">double</span> <span class=\"hljs-keyword\">check</span> <span class=\"hljs-keyword\">with</span>\naz account <span class=\"hljs-keyword\">show</span>\n</code></pre>\n<h3 id=\"3clonetheworkshopscripts\">3. Clone the workshop scripts</h3>\n<p>Once you have the <code>Azure Pass - Sponsorship</code> subscription set, we need to get some scripts that will automate the workshop setup.  Run this command:</p>\n<pre><code class=\"hljs\">git clone https:<span class=\"hljs-regexp\">//gi</span>thub.com<span class=\"hljs-regexp\">/dt-alliances-workshops/</span>azure-modernization-dt-orders-setup.git\n</code></pre>","activityList":[]},{"id":"2.4","name":"Capture Setup Inputs","content":"<h2 id=\"capturesetupinputs\">Capture Setup Inputs</h2>\n<p>The next steps of this guide will have you gather various information from your environment needed to provision and setup your environment and for exercises later in the workshop.</p>\n<p>From your Dynatrace environment, you will capture:</p>\n<ul>\n<li>Base URL</li>\n<li>Environment ID</li>\n<li>API token</li>\n<li>PaaS token</li>\n</ul>\n<p>From your Azure subscription, you will capture:</p>\n<ul>\n<li>Subscription ID</li>\n</ul>\n<h3 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>The next set of steps assume that your Dynatrace tenant is fully provisioned, you have your Azure subscription, and you are logged in to both.</em></p>\n<h2 id=\"captureinputsscript\">Capture Inputs Script</h2>\n<p>In the code repo you cloned, there is a simple UNIX shell script for this workshop that prompts for these values and writes them to a file called <code>workshop-credentials.json</code>. Later in the workshop steps, there are a few other simple UNIX shell scripts that will automate the step that reads this file so that you don’t need to type or copy-paste these values over and over again during the workshop.</p>\n<p>So start by running this script that will provide prompts. Follow the sections below to get these values and paste them against the prompt. If you mess up, you can re-run the script.</p>\n<p>1 . Run inputs script</p>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">cd</span> ~<span class=\"hljs-string\">/azure-modernization-dt-orders-setup/provision-scripts</span>\n<span class=\"hljs-string\">./input-credentials.sh</span>\n</code></pre>\n<p>2 . Login into Dynatrace. </p>\n<h3 id=\"technicalnote-1\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>The URL will be in the Dynatrace tenant creation email such as: https://[ENVIRONMENT ID].live.dynatrace.com.  You can also get there by by using the the SaaS login link on the top right of the <a href=\"https://www.dyntrace.com\">Dynatrace home page</a>.</em></p>\n<h2 id=\"input1of5yourlastname\">Input 1 of 5: Your last name</h2>\n<p>In the UNIX terminal, enter your last name at the prompt. </p>\n<h3 id=\"technicalnote-2\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>This will be added as a prefix for the Azure resource group name.</em></p>\n<h2 id=\"input2of5dynatracebaseurl\">Input 2 of 5: Dynatrace Base URL</h2>\n<p>1 . Copy the Dynatrace base URL from your browser, for example: <strong>https://[ENVIRONMENT ID].live.dynatrace.com</strong></p>\n<h3 id=\"technicalnote-3\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>Only include the base URL up to the <strong>…dynatrace.com</strong></em></p>\n<p>2 . Back in the UNIX terminal, paste the value for the <code>Dynatrace Base URL</code> prompt.</p>\n<h2 id=\"input3of5dynatracepaastoken\">Input 3 of 5: Dynatrace PaaS Token</h2>\n<p>1 . From the Dynatrace left side menu, select <code>Settings</code>. Under the <code>Integrations</code> sub-menu, click the <code>Platform as a Service</code> option</p>\n<p><img src=\"assets/setup-paas-menu.png\" alt=\"image\" /></p>\n<p>2 . Click the <code>Generate Token</code> button, Enter a name for your token (e.g. workshop), then click the <code>Generate</code> button</p>\n<p><img src=\"assets/setup-generate-paas-token.png\" alt=\"image\" /></p>\n<p>3 . Use the <code>Copy</code> button</p>\n<p><img src=\"assets/setup-paas-token-copy.png\" alt=\"image\" /></p>\n<p>4 . Back in the UNIX terminal, paste the value for the <code>Dynatrace PaaS Token</code> prompt</p>\n<h2 id=\"input4of5dynatraceapitoken\">Input 4 of 5: Dynatrace API Token</h2>\n<p>1 . From the Dynatrace left side menu, select <code>Settings</code>. Under the <code>Integrations</code> sub-menu, click the <code>Dynatrace API</code> option</p>\n<p><img src=\"assets/setup-api-menu.png\" alt=\"image\" /></p>\n<p>2 . Click the <code>Generate Token</code> button, Enter a name for your token (e.g. workshop), then click the <code>Generate</code> button</p>\n<p><img src=\"assets/setup-api-token.png\" alt=\"image\" /></p>\n<p>3 . Expand both the <code>API V2</code> and <code>API V1</code> section and enable permissions as shown below</p>\n<p><img src=\"assets/setup-api-settings.png\" alt=\"image\" /></p>\n<p>4 . Use the <code>Copy</code> button</p>\n<p><img src=\"assets/setup-api-copy.png\" alt=\"image\" /></p>\n<p>5 . Back in the UNIX terminal, paste the value for the <code>Dynatrace API Token</code> prompt</p>\n<h2 id=\"input5of5azuresubscriptionid\">Input 5 of 5: Azure subscription ID</h2>\n<p>1 . Open a new browser to the Azure portal - <a href=\"https://portal.azure.com\">https://portal.azure.com</a></p>\n<p>2 . Search for subscriptions and open the subscriptions page</p>\n<p><img src=\"assets/setup-azure-search-subscription.png\" alt=\"image\" /></p>\n<p>3 . Make sure you see <code>Azure Pass - Sponsorship</code> as one if your subscriptions.  If not, let the instructor know.</p>\n<p><img src=\"assets/setup-azure-promo-subscription.png\" alt=\"image\" /></p>\n<p>4 . Click on the <code>Azure Pass - Sponsorship</code> subscription.</p>\n<p>5 . On the subscription page, copy the Subscription ID using the copy button</p>\n<p><img src=\"assets/setup-azure-copy-subscription.png\" alt=\"image\" /></p>\n<p>4 . Back in the UNIX terminal, paste the value for the <code>Azure Subscription ID</code> prompt</p>\n<h3 id=\"verify\">Verify</h3>\n<p>Your completed data entry should look like this:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-section\">Please confirm all are correct:\n--------------------------------------------------</span>\nYour last name           : LASTNAME\nDynatrace Base URL       : https://MY-ENVIONMENT.live.dynatrace.com\nDynatrace PaaS Token     : MY-PAAS-TOKEN\nDynatrace API Token      : MY-API-TOKEN\nAzure Subscription ID    : xxxx-xxxx-xxxx-xxxx-xxxxxxxx\nIs this correct? (y/n): y\n</code></pre>\n<p>After you confirm, the script will show the saved values in the <code>workshop-credentials.json</code> file. </p>\n<h3 id=\"fixinginputs\">Fixing Inputs</h3>\n<p>If you mess up, you can re-run the script again and will prompt you again for each value.</p>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">cd</span> ~<span class=\"hljs-string\">/azure-modernization-dt-orders-setup/provision-scripts</span>\n<span class=\"hljs-string\">./input-credentials.sh</span>\n</code></pre>","activityList":[]},{"id":"2.5","name":"Provision the workshop","content":"<h2 id=\"provisiontheworkshop\">Provision the workshop</h2>\n<p>This step will provision several Azure resources and the Dynatrace configuration needed for the workshop.</p>\n<p>The process to provision everything once you click \"go\" will take ~10 minutes.</p>\n<h2 id=\"whatexactlyisthisscriptdoing\">What exactly is this script doing?</h2>\n<p>1 . Add Azure resources</p>\n<ul>\n<li>Add a Resource Group for all the VMs named: <code>[YOURNAME]-azure-modernize-workshop</code></li>\n<li>Add Service Principal: <code>[YOURNAME]-azure-modernize-workshop-sp</code> needed for the Azure monitor integration.</li>\n<li>Add VM named: <code>dt-orders-monolith</code>. At startup, it installs Docker and the Dynatrace Orders application in the Monolith configuration. OneAgent is installed using Azure extension</li>\n<li>Add VM named: <code>dt-orders-active-gate</code>. At startup, it installs the Dynatrace ActiveGate process needed for the Azure monitor integration.</li>\n</ul>\n<p>2 . Set Dynatrace configuration</p>\n<ul>\n<li>Set global <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/problem-detection-and-analysis/problem-detection/detection-of-frequent-issues/\">Frequent Issue Detection</a> settings to Off</li>\n<li>Adjust the <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/problem-detection-and-analysis/problem-detection/how-to-adjust-the-sensitivity-of-problem-detection/\">Service Anomaly Detection</a> global settings to a fixed error threshold</li>\n<li>Add <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/management-zones/\">Management Zones</a> for the monolith and micro services versions of the application</li>\n<li>Add <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/tags-and-metadata/\">Auto Tagging Rules</a> to drive management zone and SLO settings</li>\n<li>Add <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/service-level-objectives/\">SLOs</a> for a use in custom dashboards</li>\n<li>Add <a href=\"https://www.dynatrace.com/support/help/technology-support/cloud-platforms/microsoft-azure-services/set-up-integration-with-azure-monitor/\">Azure Monitor Integration</a></li>\n</ul>\n<h3 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>The Dynatrace configuration scripts use a combination of <a href=\"https://github.com/dynatrace-oss/dynatrace-monitoring-as-code\">Dynatrace Monitoring as Code</a> framework (a.k.a. monaco) and the <a href=\"https://www.dynatrace.com/support/help/dynatrace-api/configuration-api/\">Dynatrace Configuration API</a> for those few Dynatrace configurations not yet supported by monaco.</em></p>\n<h2 id=\"runthescript\">Run the script</h2>\n<p>1 . Run these commands to start the provisioning process</p>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">cd</span> ~<span class=\"hljs-string\">/azure-modernization-dt-orders-setup/provision-scripts</span>\n<span class=\"hljs-string\">./provision-workshop.sh</span>\n</code></pre>\n<p>The start of the script output will look like this:</p>\n<pre><code class=\"hljs\">==========================================\nProvisioning workshop resources\n==========================================\nUsing resource group azure-modernize-workshop\nProvisioning monolith: Starting: Thu Apr 14 22:20:33 EDT 2021\n<span class=\"hljs-bullet\">...\n</span><span class=\"hljs-bullet\">...\n\n</span>Eventually when it completes, it will look like this:\n\n<span class=\"hljs-bullet\">...\n</span><span class=\"hljs-section\">...\n=============================================</span>\n<span class=\"hljs-section\">Provisioning workshop resources COMPLETE\n=============================================</span>\n</code></pre>\n<h3 id=\"technicalnote-1\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>The process to provision everything will take ~8-10 minutes, so please be patient.</em></p>","activityList":[]},{"id":"2.6","name":"Provision Kubernetes","content":"<h2 id=\"provisionkubernetes\">Provision Kubernetes</h2>\n<p>This step extends what you did in the previous step and will provision an Azure Kubernetes Service (AKS) cluster and the Dynatrace configuration needed for the workshop.</p>\n<p>The process to provision everything once you click \"go\" will take ~10 minutes.</p>\n<h2 id=\"whatexactlyisthisscriptdoing\">What exactly is this script doing?</h2>\n<p>1 . Add Azure resources</p>\n<ul>\n<li>Add an Azure Kubernetes Service (AKS) cluster named: <code>[YOURNAME]-azure-modernize-cluster</code></li>\n</ul>\n<p>2 . Set Dynatrace configuration</p>\n<ul>\n<li>Add <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/management-zones/\">Management Zones</a> for the kubernetes version of the application</li>\n<li>Add <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/process-groups/configuration/customize-the-name-of-process-groups/\">Custom Process Naming Rule</a> that will format the kubernetes pod process to have the format <code>[kubernetes namespace name]-[service name]</code>.</li>\n<li>Add <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/service-level-objectives/\">SLOs</a> for a use in custom dashboards</li>\n</ul>\n<h3 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>The Dynatrace configuration scripts use the <a href=\"https://github.com/dynatrace-oss/dynatrace-monitoring-as-code\">Dynatrace Monitoring as Code</a> framework (a.k.a. monaco).</em></p>\n<h2 id=\"openanewazureshell\">Open a new Azure Shell</h2>\n<p>If you are running the provision workshop script, that will take several minutes.  </p>\n<p>Now open a second Azure shell to use.  To do this, click on the \"+\" icon and this will open a second browser window.</p>\n<p><img src=\"assets/setup-k8-shell.png\" alt=\"image\" /></p>\n<h2 id=\"runthescript\">Run the script</h2>\n<p>1 . In the new shell, run these commands to start the provisioning process. </p>\n<h3 id=\"technicalnote-1\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>You must include <code>k8</code> as the argument to the command</em></p>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">cd</span> ~<span class=\"hljs-string\">/azure-modernization-dt-orders-setup/provision-scripts</span>\n<span class=\"hljs-string\">./provision-workshop.sh</span> k8\n</code></pre>\n<p>The start of the script output will look like this:</p>\n<pre><code class=\"hljs\">===================================================================\nAbout to Provision Workshop - k8\n===================================================================\nProceed? (y/n) : y\n<span class=\"hljs-bullet\">...\n</span><span class=\"hljs-bullet\">...\n</span>Creating AKS Cluster: jahn-azure-modernize-cluster\n<span class=\"hljs-bullet\">...\n</span><span class=\"hljs-bullet\">...\n\n</span>Eventually when it completes, it will look like this:\n\n<span class=\"hljs-bullet\">...\n</span><span class=\"hljs-section\">...\n=============================================</span>\n<span class=\"hljs-section\">Provisioning workshop resources COMPLETE\n=============================================</span>\n</code></pre>\n<h3 id=\"technicalnote-2\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>The process to provision everything will take ~10 minutes, so please be patient.</em></p>","activityList":[]},{"id":"2.7","name":"Summary","content":"<h2 id=\"summary\">Summary</h2>\n<p>In this section, you should have completed the following:</p>\n<p>✅ Provisioned a Dynatrace tenant and Azure subscription</p>\n<p>✅ Setup the Azure Cloud Shell to run various UNIX commands</p>\n<p>✅ Captured environment and token info needed for workshop provisioning automation scripts</p>\n<p>✅ Provisioned workshop resources</p>","activityList":[]}]},{"id":"3","name":"Lab 1 - OneAgent Observability","content":"<h2 id=\"lab1oneagentobservability\">Lab 1 - OneAgent Observability</h2>\n<p>While choosing the right migration strategies, such as re-hosting or re-architecting, one must assess the different risks, costs, and benefits. However, often the details of what is where and what is dependent on what within the technical stack is missing or poorly documented.  All that may exist is out of date diagrams and a mix of monitoring tool metrics that must be \"stiched\" together.</p>\n<p>Not having enough details about the current environment is hindering organizations ability to make the right decisions when planning what to migrate and when.</p>\n<p>To address this problem, Dynatrace’s OneAgent can automatically discover the application, services, processes and to build a complete dependency mapping for the entire application environment. So, let’s begin!</p>\n<h2 id=\"objectivesofthislab\">Objectives of this Lab</h2>\n<p>🔷 Review Dynatrace OneAgent</p>\n<p>🔷 Review real-time data now available for the sample application</p>\n<p>🔷 Review how Dynatrace helps with modernization planning</p>","activityList":[{"id":"3.1","name":"Lab Setup","content":"<h2 id=\"labsetup\">Lab Setup</h2>\n<p>Referring to the picture below, here are the components for lab 1.</p>\n<p><strong>#1 . Sample Application</strong></p>\n<p>Sample app representing a simple architecture of a frontend and backend implemented as Docker containers that we will review in this lab.</p>\n<p><strong>#2 . Dynatrace monitoring</strong></p>\n<p>The Dynatrace OneAgent has been installed by the workshop provisioning scripts and is communicating to your Dynatrace tenant.</p>\n<p><strong>#3 . Load generator process</strong></p>\n<p>A docker processes that sends simulated user traffic to the sample app using <a href=\"https://github.com/dt-orders/load-traffic\">Jmeter</a> run within a Docker container.  You will not need to interact with this container; it just runs in the background.</p>\n<p><img src=\"assets/lab1-setup.png\" alt=\"image\" /></p>\n<h2 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong>:</h2>\n<p><em>A real-world scenario would often start with the application components running on a physical or virtualized host in on-prem and not \"Dockerized\". To simplify the workshop, we \"Dockerized\" the application into a front-end and back-end. In Dynatrace, these Docker containers all show up as \"processes\" on a host just like a \"non-Dockerized\" application will.</em></p>","activityList":[]},{"id":"3.2","name":"OneAgent","content":"<h2 id=\"oneagent\">OneAgent</h2>\n<p>The host running the sample application was created using scripts to install and run the Sample Application and to install the Dynatrace OneAgent. All these scripts you can review <a href=\"https://github.com/dt-alliances-workshops/azure-modernization-dt-orders-setup.git\">here</a> within the <code>provision-scripts</code> subfolder.</p>\n<p>The Dynatrace OneAgent was also preinstalled and is sending data to your Dynatrace SaaS environment using the <a href=\"https://www.dynatrace.com/support/help/technology-support/cloud-platforms/microsoft-azure-services/oneagent-integration/integrate-oneagent-on-azure-virtual-machines/\">Dynatrace OneAgent VM extension for Azures</a></p>\n<p>The Azure CLI command for setting up the OneAgent VM extension looks like:</p>\n<pre><code class=\"hljs\">az vm extension <span class=\"hljs-built_in\">set</span> \\\n    -<span class=\"hljs-literal\">-publisher</span> dynatrace.ruxit \\\n    -<span class=\"hljs-literal\">-name</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$AGENT</span>&quot;</span> \\\n    -<span class=\"hljs-literal\">-resource</span><span class=\"hljs-literal\">-group</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$AZURE_RESOURCE_GROUP</span>&quot;</span> \\\n    -<span class=\"hljs-literal\">-subscription</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$AZURE_SUBSCRIPTION</span>&quot;</span> \\\n    -<span class=\"hljs-literal\">-vm</span><span class=\"hljs-literal\">-name</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$HOSTNAME</span>&quot;</span> \\\n    -<span class=\"hljs-literal\">-settings</span> <span class=\"hljs-string\">&quot;{\\&quot;</span>tenantId\\<span class=\"hljs-string\">&quot;:\\&quot;</span><span class=\"hljs-variable\">$DT_ENVIRONMENT_ID</span>\\<span class=\"hljs-string\">&quot;,\\&quot;</span>token\\<span class=\"hljs-string\">&quot;:\\&quot;</span><span class=\"hljs-variable\">$DT_PAAS_TOKEN</span>\\<span class=\"hljs-string\">&quot;, \\&quot;</span>server\\<span class=\"hljs-string\">&quot;:\\&quot;</span><span class=\"hljs-variable\">$DT_BASEURL</span>/api\\<span class=\"hljs-string\">&quot;, \\&quot;</span>hostGroup\\<span class=\"hljs-string\">&quot;:\\&quot;</span><span class=\"hljs-variable\">$HOSTGROUP_NAME</span>\\<span class=\"hljs-string\">&quot;}&quot;</span> \n</code></pre>\n<h2 id=\"reviewoneagentstatus\">Review OneAgent Status</h2>\n<p>We don't have to install the OneAgent now, let's just review its status.</p>\n<ol>\n<li><p>Login into Dynatrace</p></li>\n<li><p>Choose the <code>Manage --&gt; Deployment status</code> option from the left side menu to open the OneAgent deployment page.</p></li>\n</ol>\n<p><img src=\"assets/lab1-deployment-status.png\" alt=\"image\" /></p>\n<h2 id=\"reviewanotherwaytoinstalltheoneagent\">Review another way to install the OneAgent</h2>\n<ol>\n<li>Choose the <code>Hub</code> option from the left side menu to open the OneAgent deployment page. </li>\n</ol>\n<p><img src=\"assets/lab1-dynatrace-hub.png\" alt=\"image\" /></p>\n<ol>\n<li><p>Explore all the capabilities of Dynatrace while you are in the Hub</p></li>\n<li><p>Pick the <code>OneAgent</code> under the <code>Start monitoring</code> section, then click the <code>Download Agent</code> at the bottom of the page to open the <code>Download agent</code> page.</p></li>\n</ol>\n<p><img src=\"assets/lab1-deploy-dynatrace.png\" alt=\"image\" /></p>\n<ol>\n<li>On the <code>Download agent</code> page, pick the platform <code>Linux</code> to view the commands will download and run the OneAgent installer.</li>\n</ol>\n<p><img src=\"assets/lab1-download-dynatrace.png\" alt=\"image\" /></p>\n<h3 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>The URL and Token is unique to your Dynatrace tenant.  If you expand the <code>Set customized options (optional).</code> section you can review other options for the OneAgent installer.</em></p>\n<h3 id=\"technicalnote-1\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>Setting the hostname via  <code>/bin/sh Dynatrace-OneAgent-Linux-1.207.184.sh --set-host-name=monolith</code> is just <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/hosts/configuration/set-custom-host-names-in-dynamic-environments/\">one of the ways</a> to customize host naming.</em></p>\n<ol>\n<li>These are the commands used to download, verify, and install the OneAgent.  <strong>That is it!</strong></li>\n</ol>\n<p><img src=\"assets/lab1-install-dynatrace.png\" alt=\"image\" /></p>\n<ol>\n<li>Go back the <code>Download agent</code> page and review other options like Windows or Kubernetes.</li>\n</ol>\n<h3 id=\"technicalnote-2\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>To learn more about the various ways the OneAgent can be installed, check out the <a href=\"https://www.dynatrace.com/support/help/setup-and-configuration/dynatrace-oneagent/\">Dynatrace documentation</a></em></p>","activityList":[]},{"id":"3.3","name":"Sample app","content":"<h2 id=\"sampleapp\">Sample app</h2>\n<p>The sample application is called Dynatrace Orders.  A more detailed overview can be found here - <a href=\"https://github.com/dt-orders/overview\">https://github.com/dt-orders/overview</a>.  All the source code can be found here - <a href=\"https://github.com/dt-orders\">https://github.com/dt-orders</a></p>\n<h2 id=\"getthepubliciptothefrontendofthesampleapplication\">Get the Public IP to the frontend of the Sample Application.</h2>\n<p>Open up Azure console and open up the Virtual Machine page.  You can use the search feature as shown below.</p>\n<p><img src=\"assets/lab1-azure-find-vm.png\" alt=\"image\" /></p>\n<p>Once on the Virtual Machine page, click on the VM named <code>dt-orders-monolith</code>.  You can explore details about this VM, but you will want to copy the public IP as shown below.</p>\n<p><img src=\"assets/lab1-azure-get-public-ip.png\" alt=\"image\" /></p>\n<h2 id=\"viewthesampleappinabrowser\">View the Sample app in a Browser</h2>\n<p>To view the application, copy the public IP into a browser. It will look like this:</p>\n<p><img src=\"assets/lab1-app.png\" alt=\"image\" /></p>\n<p>Use the menu on the home page to navigate around the application and notice the URL for key functionality.  You will see these URLs later as we analyze the application.</p>\n<ul>\n<li>Customer List = <code>customer/list.html</code></li>\n<li>Customer Detail - Each product has a unique page = <code>customer/5.html</code></li>\n<li>Catalog List = <code>catalog/list.html</code></li>\n<li>Catalog Search Form = <code>catalog/searchForm.html</code></li>\n<li>Order List = <code>order/list.html</code></li>\n<li>Order Form = <code>order/form.html</code></li>\n</ul>","activityList":[]},{"id":"3.4","name":"Host view","content":"<h2 id=\"hostview\">Host view</h2>\n<p>In the next few sections, you will review what the OneAgent automatically discovered for the host, services, processes, and the complete dependency mapping for the sample application.  </p>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>As you plan your migration, each of these views will give insights into accessing the profile, consumption and dependencies to other systems and services.</p>\n<h2 id=\"reviewhosts\">Review Hosts</h2>\n<p>From the left-side menu in Dynatrace choose <code>hosts</code> then click on the host with the name <code>dt-orders-monolith</code>.</p>\n<p><img src=\"assets/lab1-hostlist.png\" alt=\"image\" /></p>\n<p>On host page, you will see basic infrastructure information for the host.</p>\n<ol>\n<li>Now expand the <code>Properties</code> section to see data about the host:</li>\n<li>Host resource metrics (CPU, memory)</li>\n<li>Host availability</li>\n<li>Discovered processes. In this case most of which are Java applications running in Tomcat.</li>\n</ol>\n<p><img src=\"assets/lab1-host-view.png\" alt=\"image\" /></p>","activityList":[]},{"id":"3.5","name":"About Smartscape","content":"<h3 id=\"aboutsmartscape\">About Smartscape</h3>\n<p>Enterprises have many hosts, services, and application that are ever changing. The ability to automatically discover and change as the environment changes is a key feature that Smartscape delivers.  </p>\n<p>Dynatrace's near real-time environment-topology visualization tool, Smartscape, is where Dynatrace's auto-discovery is delivered into a quick and efficient visualization of all the topological dependencies in your infrastructure, processes, and services.</p>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>Smartscape shows all the dependencies of a given service. Those include connections to queues, web servers, app servers, and a native process. The host view shows historical and live time-series data for usage as well as the consuming processes. This information allows us to better plan the migration, as all depending services must be considered during the migration.</p>\n<p><img src=\"assets/lab1-smartscape.png\" alt=\"image\" /></p>\n<p>Referring to the picture above: </p>\n<ul>\n<li>On the horizontal axis, it visualizes all ingoing and outgoing call relationships within each tier</li>\n<li>On the vertical axis, it displays full-stack dependencies across all tiers<ul>\n<li>Data center</li>\n<li>Hosts</li>\n<li>Process</li>\n<li>Service</li>\n<li>Application</li></ul></li>\n</ul>\n<h2 id=\"reviewsmartscape\">Review Smartscape</h2>\n<p>Let’s see how Dynatrace can visualize these processes using Smartscape.</p>\n<ol>\n<li>Be sure you are on the <code>dt-orders-monolith</code> host page</li>\n<li>Just click on the <code>...</code> box on the to the right of the host name</li>\n<li>pick <code>Smartscape view</code> menu option</li>\n<li>this will open Smartscape filtered to this Host Instance</li>\n</ol>\n<p><img src=\"assets/lab1-host-smartscape.png\" alt=\"image\" /></p>\n<p>Feel free to explore the Smartscape.</p>","activityList":[]},{"id":"3.6","name":"Process","content":"<h2 id=\"process\">Process</h2>\n<p>In the Smartscape view, we saw the visualizations of the relationships in vertical stack and as well as the relationships spatially. Now let’s view the processes and services running on the host.</p>\n<p>As you plan your migration, you need more than just host level metrics.  Knowing the details for each service, <strong>BEFORE</strong> you change it, will lower the risk of impacting the business.</p>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>Very quickly we have seen what processes and services are running on a host AND more importantly, what processes and services call (outbound) and are being called (inbound).  Having a real-time picture is certainly more accurate that out of date documentation.</p>\n<h2 id=\"letsreview\">Lets Review!</h2>\n<p>Return back to the host view for the host with the prefix of <code>dt-orders-monolith</code> and locate the <code>Processes and Containers</code> section.</p>\n<p>Click on the <code>monolith-frontend</code> process to open the process detail view.</p>\n<p><img src=\"assets/lab1-host-process.png\" alt=\"image\" /></p>\n<h2 id=\"processview\">Process view</h2>\n<p>You should be on the process page where you will see information for this process.  Follow the picture below to locate the following:</p>\n<ol>\n<li>Click on the <code>Properties and tags</code> line to toggle on/off to see additional data </li>\n<li>Notice the properties such as open ports</li>\n<li>On the info graphic:<ul>\n<li>Click to view the processes that call this process (Inbound)</li>\n<li>Click to view the services that are served by this process. In this case there are multiple</li>\n<li>Click to view the processes that this process calls (Outbound)</li>\n<li>Click to view the Process specific metrics</li></ul></li>\n<li>Did you notice Docker??</li>\n</ol>\n<p><img src=\"assets/lab1-process-view.png\" alt=\"image\" /></p>\n<h3 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>Dynatrace automatically recognizes many common processes like Tomcat and will capture process specific metrics such as JVM garbage collection. See a list of supported technologies, languages and containers in the <a href=\"https://www.dynatrace.com/support/help/technology-support/supported-technologies-and-versions\">Dynatrace documentation</a></em></p>\n<h2 id=\"dynatraceandcontainers\">Dynatrace and containers</h2>\n<p>In the picture above, the arrow shows the properties for Docker.</p>\n<p>Our sample app was built as a Docker container and Dynatrace hooks into containers and provides code for injecting OneAgent into containerized process.  </p>\n<h2 id=\"howdynatracemonitorscontainers\">How Dynatrace monitors containers</h2>\n<p><img src=\"assets/lab1-docker-monitoring.png\" alt=\"image\" /></p>\n<p>Dynatrace hooks into containers and provides code for injecting OneAgent into containerized processes.</p>\n<p>There’s no need to modify your Docker images, modify run commands, or create additional containers to enable Docker monitoring. Simply install OneAgent on your hosts that serve containerized applications and services. Dynatrace automatically detects the creation and termination of containers and monitors the applications and services contained within those containers.</p>\n<h3 id=\"technicalnote-1\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p><em>You can read more about Dynatrace Docker Monitoring <a href=\"https://www.dynatrace.com/support/help/technology-support/cloud-platforms/other-platforms/docker/basic-concepts/how-dynatrace-monitors-containers/\">here</a> and technical details <a href=\"https://www.dynatrace.com/support/help/technology-support/cloud-platforms/other-platforms/docker/monitoring/monitor-docker-containers\">here</a></em></p>\n<h2 id=\"viewaservice\">View a Service</h2>\n<p>Now Let’s review a specific service.</p>\n<ol>\n<li>Click the <code>services</code> square above the host infographic to open the list of services</li>\n<li>From the list of services, choose the <code>frontend</code></li>\n</ol>\n<p><img src=\"assets/lab1-pick-service.png\" alt=\"image\" /></p>\n<h2 id=\"serviceview\">Service View</h2>\n<p>You should be on the service page where you will see information for this specific service.  Follow the picture below to locate the following:</p>\n<ol>\n<li>Click on the <code>Properties</code> line to toggle on/off to see additional data</li>\n<li>Click to view the services that call this service (Inbound)</li>\n<li>Click to view the services that this service calls (Outbound)</li>\n</ol>\n<p><img src=\"assets/lab1-service-view.png\" alt=\"image\" /></p>","activityList":[]},{"id":"3.7","name":"Services","content":"<h2 id=\"services\">Services</h2>\n<p>Web applications consist of web pages that are served by web servers and web application processes, for example Tomcat. Web and mobile applications are built upon services that process requests like web requests, web service calls, and messaging. </p>\n<p>Such \"server-side services\" can take the form of web services, web containers, database requests, custom services, and more. Services may in turn call other services such as web services, remote services, and databases services.</p>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>As you plan your migration, it is important to gain a complete picture of interdependency to the rest of the environment architecture at host, processes, services, application perspectives. Since time is always scarce, being able to do this in a single place can shorten assessment timelines.</p>\n<h2 id=\"services-1\">Services</h2>\n<p>Let’s now take a look at all the services being monitored by clicking on the <code>Services</code> left side Dynatrace menu.</p>\n<p>In the management zone drop down, choose <code>dt-orders-monolith</code>.</p>\n<p><img src=\"assets/lab1-pick-monolith-mz.png\" alt=\"image\" /></p>\n<p>The filtered list should now look like this:</p>\n<p><img src=\"assets/lab1-trans-services.png\" alt=\"image\" /></p>\n<p>Choose the <code>frontend</code> service.</p>\n<p>On the <code>frontend</code> service page, find the <code>Dynamic Web Requests</code> section on the right and click the <code>view Dynamic Requests</code> button to see what it calls. </p>\n<p><img src=\"assets/lab1-dynamic-requests-arrow.png\" alt=\"image\" /></p>\n<p>On this page you can view the transactions as time-series charts.</p>\n<p><img src=\"assets/lab1-dynamic-requests-chart.png\" alt=\"image\" /></p>\n<p>On this page you can view the top 15 requests and their response time consumption.  You should recognize the URLs from the sample app!</p>\n<p><img src=\"assets/lab1-dynamic-requests-list.png\" alt=\"image\" /></p>\n<p>By clicking on one of the requests, the time-series charts are filtered to just that one request.</p>\n<p><img src=\"assets/lab1-request-filter.png\" alt=\"image\" /></p>\n<h2 id=\"analysisview\">Analysis View</h2>\n<p>On the top of the page on the right is a button labeled <code>Create Analysis view</code>, click that.</p>\n<p><img src=\"assets/lab1-analysis-view-button.png\" alt=\"image\" /></p>\n<p>Try the various options available to view, filter and analyze data.</p>\n<p><img src=\"assets/lab1-analysis-view.png\" alt=\"image\" /></p>","activityList":[]},{"id":"3.8","name":"Analyze serviceflow","content":"<h2 id=\"analyzeserviceflow\">Analyze serviceflow</h2>\n<p>We just saw one way to review process and service communication, but let’s look at how Dynatrace understands your applications’ transactions from end to end and visualizes through <code>Service Backtraces</code> and <code>Service flows</code>.</p>\n<ul>\n<li><p>With <code>Service flow</code>, you see the flow of service calls <strong>FROM</strong> a service, request, or their filtered subset. Along with the specific services that are triggered, you can also see how each component of a request contributes to the overall response time.</p></li>\n<li><p>With <code>Service backtrace</code>, you see the calls <strong>TO</strong> a service.</p></li>\n</ul>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>As you plan your migration, it is important to gain a complete picture of interdependency to the rest of the environment architecture at host, processes, services, and application perspectives. Since time is always scarce, being able to do this in a single place can shorten assessment timelines.</p>\n<p>Knowing the type of access, executed statements, and amount of data transferred during regular hours of operation allows for better planning and prioritization. </p>\n<h2 id=\"reviewserviceflow\">Review Service Flow</h2>\n<ol>\n<li><p>Return to the <code>frontend</code> service.  You can use the <code>breakcrumb</code> menu as shown below.</p>\n<p><img src=\"assets/lab1-navigate-to-frontend.png\" alt=\"image\" /></p></li>\n<li><p>On the <code>frontend</code> service page, locate the <code>Understand dependencies</code> section on the right, and then click the <code>view service flow</code> button. </p>\n<p><img src=\"assets/lab1-service-flow-arrow.png\" alt=\"image\" /></p></li>\n</ol>\n<h2 id=\"responsetimeperspective\">Response time perspective</h2>\n<p>You should now be on the <strong>Service flow</strong> page.</p>\n<p>Right away, we can see how this application is structured:  </p>\n<ul>\n<li>Frontend calls backend</li>\n<li>Backend calls database</li>\n</ul>\n<p><img src=\"assets/lab1-service-flow.png\" alt=\"image\" /></p>\n<p>Refer to the numbers in the picture above:</p>\n<ol>\n<li>The timeframe defaults to 10 minutes but can be adjusted. </li>\n<li>We are viewing the data from a <strong>Response time perspective</strong>. Shortly, we will review the <strong>Throughput perspective</strong>.</li>\n<li>Click on the boxes to expand the response time metrics. We can see that most of the time is spent in the backend service.</li>\n<li>Even though there are a few calls to the database for every backend service request, only a very small amount of the response time is spent in the database. </li>\n</ol>\n<h2 id=\"throughputperspective\">Throughput perspective</h2>\n<p><img src=\"assets/lab1-service-flow-tp.png\" alt=\"image\" /></p>\n<p>Refer to the numbers in the picture above:</p>\n<ol>\n<li>The timeframe defaults to 10 minutes but can be adjusted</li>\n<li>Change to the <strong>Throughput</strong> perspective by clicking on the box</li>\n<li>Click on the boxes to expand the metrics to see the number of requests and average response times going to the backend sevice</li>\n<li>We can see the number of requests to <code>backend</code> database</li>\n</ol>","activityList":[]},{"id":"3.9","name":"Analyze service backtrace","content":"<h2 id=\"analyzeservicebacktrace\">Analyze service backtrace</h2>\n<p>Dynatrace understands your applications transactions from end to end. This transactional insight is visualized several ways like the backtrace. </p>\n<p>The backtrace tree view represents the sequence of services that led to this service call, beginning with the page load or user action in the browser.</p>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>Using the service flow and service backtrace, these two tools give you a complete picture of interdependency to the rest of the environment architecture at host, processes, services, application perspectives. </p>\n<h2 id=\"reviewservicebacktrace\">Review Service backtrace</h2>\n<p>Let’s now take a look at the services by clicking on the <code>Services</code> left side Dynatrace menu.</p>\n<p>Pick the <code>backend</code> service.</p>\n<p><img src=\"assets/lab1-trans-services-db.png\" alt=\"image\" /></p>\n<p>On the <code>backend</code> service, click on the <code>Analyze Backtrace</code> button.</p>\n<p><img src=\"assets/lab1-service-backtrace-arrow.png\" alt=\"image\" /></p>\n<p>You should be on the service backtrace page where you will see information for this specific service.</p>\n<p>This will get more interesting in the next lab, but for the monolith backend, we can see that the backtrace is as follows:</p>\n<ol>\n<li>The starting point is the <code>backend</code></li>\n<li><code>backend</code> is called by the <code>frontend</code> service</li>\n<li><code>ApacheJMeter</code> traffic from the load generator script</li>\n<li>You may also see browser traffic to the <strong>frontend</strong> from the <code>My web application</code>.  If you don't that is OK.</li>\n</ol>\n<p><em><strong>If you click on any of the rows in the backtrace, the bottom portion of the page will expand.</strong></em></p>\n<p><img src=\"assets/lab1-service-backtrace-arrows.png\" alt=\"image\" /></p>","activityList":[]},{"id":"3.10","name":"Databases","content":"<h2 id=\"databases\">Databases</h2>\n<p>As you plan your migration, Database observability is critical to a successful plan. Knowing the type of access, executed statements, and amount of data transferred during regular hours of operation allows for better migration planning and prioritization of the move groups. In some cases, you may decide to not migrate this database in favor of other services or databases that are less complex to migrate due to fewer dependencies.</p>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>When monitoring database activity, Dynatrace shows you which database statements are executed most often and which statements take up the most time. You can also see which services execute the database statements, what will be direct input to migration planning, and prioritization of the move groups.</p>\n<p>Dynatrace monitors all the popular databases like SQL Server, Oracle, and MongoDB. See <a href=\"https://www.dynatrace.com/platform/database-monitoring/\">Dynatrace documentation</a> for more details on platform support.</p>\n<h2 id=\"navigatetothedatabase\">Navigate to the Database</h2>\n<p>To learn some out of the box features of Dynatrace, Let’s quickly review the database that exists for the sample application.</p>\n<ol>\n<li><p>Lets get back to the <code>backend</code> service. One way is to go back to the <code>Services</code> left side Dynatrace menu and then pick the <code>backend</code> service for the <code>dt-orders-monolith</code> management zone.</p></li>\n<li><p>On the <code>backend</code> service page, click on the <code>[embedded]</code> database to open the database service page. </p></li>\n</ol>\n<p><img src=\"assets/lab1-pick-db.png\" alt=\"image\" /></p>\n<h2 id=\"databasereview\">Database Review</h2>\n<p>The sample application uses an <a href=\"http://hsqldb.org/\">In memory Java relational database</a>.  On this page you can explore the database process like</p>\n<ol>\n<li>What services call this database</li>\n<li>Database availability</li>\n<li>View individual SQL statements</li>\n<li>Custom metric analysis </li>\n</ol>\n<p><img src=\"assets/lab1-database.png\" alt=\"image\" /></p>","activityList":[]},{"id":"3.11","name":"Technologies","content":"<h2 id=\"technologies\">Technologies</h2>\n<p>By default, Dynatrace gives you FullStack horizontal (who talks to whom) and vertical (what runs on what) dependency visibility as part of Dynatrace Smartscape! All without a single line of code or configuration change – just by installing the OneAgent</p>\n<p>Seeing which processes make up the monolith has been an eye-opener for many teams that have done this exercise. “Oh – we completely forgot about the dependency to this legacy process we introduced 5 years ago!” – that’s a common thing you hear!</p>\n<p>As you plan your migration, knowing what technologies make up your eco-system is key so that you can decide whether to migrate, refactor or replace certain services.</p>\n<p>The workshop is somewhat limited, so here is an example from another environment.</p>\n<p><img src=\"assets/lab1-technology-demo.png\" alt=\"image\" /></p>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>This is another out the box feature that helps you understand what technologies are in your environment with a heat map presentation that shows to what degree they exist. </p>\n<h2 id=\"reviewtechnologiesview\">Review Technologies View</h2>\n<ol>\n<li><p>Click on the <strong>Technology and processes</strong> link on the left side menu within Dynatrace to view the technologies that OneAgent was able to automatically discover and instrument.</p>\n<p><img src=\"assets/lab1-technology.png\" alt=\"image\" /></p></li>\n<li><p>Make sure your management zone filter is set to <code>All</code> so that you see everything</p>\n<p><img src=\"assets/lab1-mz-filter-off.png\" alt=\"image\" /></p></li>\n<li><p>In the filter box, type <code>tag</code>, choose <code>stage</code>, and the value of <code>production</code>. It should look like this:</p>\n<p><img src=\"assets/lab1-technology-filter.png\" alt=\"image\" /></p></li>\n</ol>\n<h2 id=\"planningahead\">Planning Ahead</h2>\n<p>You can always click into the <code>Dynatrace Hub</code> menu within Dynatrace to learn about the many technologies that Dynatrace supports.  This list is in sync and constantly updated in conjunction with the <a href=\"https://www.dynatrace.com/technologies\">Dynatrace website technologies pages</a></p>","activityList":[]},{"id":"3.12","name":"Summary","content":"<h2 id=\"summary\">Summary</h2>\n<p>By just installing the OneAgent, we have now gained a detailed topological view of sample application from the both the infrastructure and application tiers and we are now ready to tackle our adoption to the cloud armed with the answers we need.</p>\n<ul>\n<li><strong>Right Priority</strong> - We now understand the complexity and interdependency of services and components to the rest of the environment architecture</li>\n<li><strong>Right-Sizing the environment</strong> - We now understand which resources are required to move along with their required resource consumption patterns</li>\n<li><strong>Best Migration Strategy</strong> - We now understand the current end-to-end transactions through architecture and can choose the best migration strategy (rehost, refactor, rearchitect, rebuild)</li>\n</ul>\n<h3 id=\"checklist\">Checklist</h3>\n<p>In this section, you should have completed the following:</p>\n<p>🔷 Review Dynatrace OneAgent</p>\n<p>🔷 Review real-time data now available for the sample application</p>\n<p>🔷 Review how Dynatrace helps with modernization planning</p>","activityList":[]}]},{"id":"4","name":"Lab 2 - Kubernetes Observability","content":"<h2 id=\"lab2kubernetesobservability\">Lab 2 - Kubernetes Observability</h2>\n<p>Re-hosting (also referred to as lift and shift) is a common migration use case. Re-architecture and Re-platform are steps that break the traditional architectures and replace individual components with cloud services and microservices.</p>\n<p>We just learned how we can get great information on services, processes and user requests using Dynatrace and OneAgent. This helps us now decide what individual features or complete applications based on business benefits we need to migrate and modernize. The idea here is to focus on feature-based business benefit with functional migration. </p>\n<h2 id=\"objectivesofthislab\">Objectives of this Lab</h2>\n<p>🔷 Install the Dynatrace Operator and sample application</p>\n<p>🔷 Review how the sample application went from a simple architecture to multiple services </p>\n<p>🔷 Examine the transformed application using service flows and back traces </p>","activityList":[{"id":"4.1","name":"Modernize the Sample App ","content":"<h2 id=\"modernizethesampleapp\">Modernize the Sample App</h2>\n<p>As we saw earlier, the sample application is a three-tiered application --&gt; frontend, backend, database.</p>\n<p>For our lab, another version of the application exists that breaks out each of these backend services into separate services. By putting these services into Docker images, we gain the ability to deploy the service into modern platforms like Azure Kubernetes and Cloud managed services such as the ones from Azure shown below.</p>\n<p><img src=\"assets/lab4-app-architecture.png\" alt=\"image\" /></p>\n<h2 id=\"beyondthelab\">Beyond the Lab</h2>\n<p>Over time, you can imagine that this sample application will be further changed to add in other technologies like Azures serverless and other PaaS services like Azures SQL or Cosmo DB databases and virtual networking Application gateways as shown in the picture below.</p>\n<p><img src=\"assets/lab4-app-architecture-future.png\" alt=\"image\" /></p>\n<h2 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h2>\n<p>We will not cover this, but organizations are establishing DevOps approaches and Continuous Integration (CI) pipelines to build and test each service independently. They are also adding Continuous Deployment (CD) as well to the process too that vastly increases our ability to delivery features faster to our customers. </p>","activityList":[]},{"id":"4.2","name":"Lab Setup","content":"<h2 id=\"labsetup\">Lab Setup</h2>\n<p>Refer to the picture below, here are the components for lab 2.</p>\n<p><img src=\"assets/lab2-setup.png\" alt=\"image\" /></p>\n<p><strong>#1 . Sample Application</strong>\nSample app representing a \"services\" architecture of a frontend and multiple backend services implemented as Docker containers that we will review in this lab.</p>\n<p><strong>#2 . Kubernetes</strong>\nAzure Kubernetes Service (AKS) is hosting the application. The Kubernetes cluster had the Dynatrace OneAgent Operator installed. (see below for more details).  Two AKS nodes make up the Kubernetes cluster. The Dynatrace OneAgent was preinstalled by the OneAgent operator and is sending data to your Dynatrace SaaS environment. (see below for more details)</p>\n<p><strong>#3 . Dynatrace Operator</strong>\nDynatrace OneAgent is container-aware and comes with built-in support for out-of-the-box monitoring of Kubernetes. Dynatrace supports full-stack monitoring for Kubernetes, from the application down to the infrastructure layer.</p>\n<p><strong>#4 . Dynatrace</strong>\nDynatrace tenant where monitoring data is collected and analyzed.</p>\n<p><strong>#5 . Full-Stack Dashboard</strong>\nMade possible by the Dynatrace OneAgent that will automatically instrument each running node &amp; pod in AKS.</p>\n<p><strong>#6 . Kubernetes Dashboard</strong>\nThe Kubernetes page provides an overview of all Kubernetes clusters showing monitoring data like the clusters’ sizing and utilization.\n </p>","activityList":[]},{"id":"4.3","name":"Verify Cluster","content":"<h2 id=\"verifycluster\">Verify Cluster</h2>\n<p>Only proceed if the provisioning script completes, and looks like this:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-bullet\">...\n</span><span class=\"hljs-section\">...\n=============================================</span>\n<span class=\"hljs-section\">Provisioning workshop resources COMPLETE\n=============================================</span>\n</code></pre>\n<h2 id=\"verifyclusterusingkubectl\">Verify Cluster using kubectl</h2>\n<p>Once the provisioning script is complete, you can verify the new cluster with this kubectl command.</p>\n<p>The <a href=\"https://kubernetes.io/docs/reference/kubectl/overview/\">kubectl</a> command line tool that lets you control Kubernetes clusters. </p>\n<ol>\n<li><p>Run this command to get familiar with the command line options for kubectl.</p>\n<pre><code class=\"hljs\"><span class=\"hljs-attribute\">kubectl</span>\n</code></pre></li>\n<li><p>Configure kubectl to connect to the new cluster.  Adjust the YOURNAME value before you run the command with the value you used when did the capture script inputs step earlier.</p>\n<pre><code class=\"hljs\"><span class=\"hljs-string\">az</span> <span class=\"hljs-string\">aks</span> <span class=\"hljs-built_in\">get-credentials</span> <span class=\"hljs-built_in\">--resource-group</span> [<span class=\"hljs-string\">YOURNAME</span>]-<span class=\"hljs-string\">azure-modernize-workshop</span> <span class=\"hljs-built_in\">--name</span> [<span class=\"hljs-string\">YOURNAME</span>]-<span class=\"hljs-string\">azure-modernize-cluster</span>\n</code></pre></li>\n<li><p>Verify you are connected.  You should see <code>[YOURNAME]-azure-modernize-cluster</code> as the output.</p>\n<pre><code class=\"hljs\">kubectl <span class=\"hljs-built_in\">config</span> current-<span class=\"hljs-built_in\">context</span>\n</code></pre></li>\n<li><p>List the nodes in the cluster</p>\n<pre><code class=\"hljs\">kubectl <span class=\"hljs-builtin-name\">get</span> nodes\n</code></pre>\n<p>The output should look like this:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-attribute\">NAME</span>                                STATUS   ROLES   AGE   VERSION\n<span class=\"hljs-attribute\">aks</span>-nodepool<span class=\"hljs-number\">1</span>-<span class=\"hljs-number\">74092643</span>-vmss<span class=\"hljs-number\">000000</span>   Ready    agent   <span class=\"hljs-number\">21</span>h   v<span class=\"hljs-number\">1</span>.<span class=\"hljs-number\">19</span>.<span class=\"hljs-number\">11</span>\n<span class=\"hljs-attribute\">aks</span>-nodepool<span class=\"hljs-number\">1</span>-<span class=\"hljs-number\">74092643</span>-vmss<span class=\"hljs-number\">000001</span>   Ready    agent   <span class=\"hljs-number\">21</span>h   v<span class=\"hljs-number\">1</span>.<span class=\"hljs-number\">19</span>.<span class=\"hljs-number\">11</span>\n</code></pre>\n<p>You can see even more detail with this command.</p>\n<pre><code class=\"hljs\"><span class=\"hljs-attribute\">kubectl describe nodes</span>\n</code></pre></li>\n</ol>\n<h2 id=\"verifyclusterwithinazureportal\">Verify Cluster within Azure Portal</h2>\n<p>With the Azure web portal, search for the kubernetes services and then click on the new workshop cluster.</p>\n<p><img src=\"assets/setup-k8.png\" alt=\"image\" /></p>\n<p>Explore the configuration to view the number of nodes and the kubernetes version.</p>\n<p><img src=\"assets/setup-k8-node.png\" alt=\"image\" /></p>","activityList":[]},{"id":"4.4","name":"Kubernetes Dynatrace Operator","content":"<h2 id=\"kubernetesdynatraceoperator\">Kubernetes Dynatrace Operator</h2>\n<p>One key Dynatrace advantage is ease of activation. OneAgent technology simplifies deployment across large enterprises and relieves engineers of the burden of instrumenting their applications by hand. As Kubernetes adoption continues to grow, it becomes more important than ever to simplify the activation of observability across workloads without sacrificing the deployment automation that Kubernetes provides. Observability should be as cloud-native as Kubernetes itself.</p>\n<p>In our workshop, we will install the Dynatrace Operator that streamlines lifecycle management.  You can read more about it here in this <a href=\"https://www.dynatrace.com/news/blog/new-dynatrace-operator-elevates-cloud-native-observability-for-kubernetes/\">Dynatrace blog</a></p>\n<p>Organizations will often customize the Dynatrace Operator installation and you can read more about the options in the <a href=\"https://www.dynatrace.com/support/help/technology-support/container-platforms/kubernetes/monitor-kubernetes-environments/\">Dynatrace docs</a> but, we are going to use a single command that we can get from the Dynatrace interface to show how easy it is to get started.</p>\n<p>When we run this command, it will do the following:</p>\n<ul>\n<li>Create a namespace called <code>dynatrace</code> in your cluster containing the Dynatrace Operator supporting pods</li>\n<li>Set the OneAgent on each of the cluster nodes as to provide full-stack Dynatrace monitoring</li>\n<li>Create a Kubernetes dashboard that will be populated with the Kubernetes data pulled from the API</li>\n<li>Setup a Dynatrace Active gate that runs as a container in the <code>dynatrace</code> namespace that is used in the polling of Kubernetes API</li>\n<li>Enable preset out-of-the-box Kubernetes dashboards</li>\n</ul>\n<h2 id=\"installdynatraceoperator\">Install Dynatrace Operator</h2>\n<ol>\n<li><p>To navigate to Kubernetes page, follow these steps and refer to the picture below:</p>\n<ol>\n<li>Within Dynatrace, click on the <code>Deploy Dynatrace</code> menu</li>\n<li>Click on the <code>Start Installation</code> button</li>\n<li>Click on the <code>Kubernetes</code> button</li></ol>\n<p><img src=\"assets/lab4-operator-menu.png\" alt=\"image\" /></p></li>\n<li><p>To get the Dynatrace Operator installation command, refer to the steps and pictures below:</p>\n<ol>\n<li>On the Kubernetes configuration page, enter <code>workshop</code> for the name. This is not the cluster name, it will show up as the Kubernetes page name in Dynatrace</li>\n<li>Click the <code>Create tokens</code> button</li>\n<li>Select the <code>Skip SSL Certificate Check</code> to be ON</li>\n<li>Click the <code>Copy</code> button</li></ol>\n<p><img src=\"assets/lab4-operator.png\" alt=\"image\" /></p></li>\n<li><p>Paste the command in Azure Shell and run it</p></li>\n<li><p>Once the script is complete, then monitor the installation until you all pods are in <code>Running</code> state.</p>\n<pre><code class=\"hljs\">kubectl -n dynatrace <span class=\"hljs-builtin-name\">get</span> pods\n</code></pre>\n<p>Rerun the command until the output looks like this:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-attribute\">NAME</span>                                 READY   STATUS    RESTARTS   AGE\n<span class=\"hljs-attribute\">dynakube</span>-classic-g<span class=\"hljs-number\">5</span>n<span class=\"hljs-number\">9</span>d               <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">1</span>     Running   <span class=\"hljs-number\">0</span>          <span class=\"hljs-number\">2</span>m<span class=\"hljs-number\">45</span>s\n<span class=\"hljs-attribute\">dynakube</span>-classic-vr<span class=\"hljs-number\">5</span>qh               <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">1</span>     Running   <span class=\"hljs-number\">0</span>          <span class=\"hljs-number\">2</span>m<span class=\"hljs-number\">45</span>s\n<span class=\"hljs-attribute\">dynakube</span>-kubemon-<span class=\"hljs-number\">0</span>                   <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">1</span>     Running   <span class=\"hljs-number\">0</span>          <span class=\"hljs-number\">2</span>m<span class=\"hljs-number\">43</span>s\n<span class=\"hljs-attribute\">dynakube</span>-routing-<span class=\"hljs-number\">0</span>                   <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">1</span>     Running   <span class=\"hljs-number\">0</span>          <span class=\"hljs-number\">2</span>m<span class=\"hljs-number\">45</span>s\n<span class=\"hljs-attribute\">dynatrace</span>-operator-f<span class=\"hljs-number\">946</span>fb<span class=\"hljs-number\">4</span>c<span class=\"hljs-number\">6</span>-q<span class=\"hljs-number\">5</span>k<span class=\"hljs-number\">5</span>g   <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">1</span>     Running   <span class=\"hljs-number\">0</span>          <span class=\"hljs-number\">3</span>m<span class=\"hljs-number\">59</span>s\n</code></pre></li>\n</ol>","activityList":[]},{"id":"4.5","name":"Deploy sample application","content":"<h2 id=\"deploysampleapplication\">Deploy sample application</h2>\n<p>Dynatrace automatically derives tags from your Kubernetes/OpenShift labels. This enables you to automatically organize and filter all your monitored Kubernetes/OpenShift application components.</p>\n<p>To review what is configured for the sample application, go ahead and open this folder and look at one such as the <code>frontend.yml</code>:</p>\n<ul>\n<li><a href=\"https://github.com/dt-alliances-workshops/azure-modernization-dt-orders-setup/tree/main/app-scripts/manifests\">https://github.com/dt-alliances-workshops/azure-modernization-dt-orders-setup/tree/main/app-scripts/manifests</a> </li>\n</ul>\n<p>Notice the labels and annotations:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-attr\">metadata:</span>\n      <span class=\"hljs-attr\">labels:</span>\n        <span class=\"hljs-attr\">app.kubernetes.io/name:</span> <span class=\"hljs-string\">frontend</span>\n        <span class=\"hljs-attr\">app.kubernetes.io/version:</span> <span class=\"hljs-string\">&quot;1&quot;</span>\n        <span class=\"hljs-attr\">app.kubernetes.io/component:</span> <span class=\"hljs-string\">frontend</span>\n        <span class=\"hljs-attr\">app.kubernetes.io/part-of:</span> <span class=\"hljs-string\">dt-orders</span>\n        <span class=\"hljs-attr\">app.kubernetes.io/managed-by:</span> <span class=\"hljs-string\">helm</span>\n        <span class=\"hljs-attr\">app.kubernetes.io/created-by:</span> <span class=\"hljs-string\">dynatrace-demos</span>\n      <span class=\"hljs-attr\">annotations:</span>\n        <span class=\"hljs-attr\">owner:</span> <span class=\"hljs-string\">Team</span> <span class=\"hljs-string\">Frontend</span>\n        <span class=\"hljs-attr\">chat-channel:</span> <span class=\"hljs-string\">dev-team-frontend</span> \n</code></pre>\n<p>Notice the defined container and version.  These containers are stored in <a href=\"https://hub.docker.com/u/dtdemos\">Dockerhub</a>.</p>\n<pre><code class=\"hljs\"><span class=\"hljs-attr\">spec:</span>\n    <span class=\"hljs-attr\">containers:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">frontend</span>\n    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">dtdemos/dt-orders-frontend:1</span>\n</code></pre>\n<p>Notice the <code>DT_CUSTOM_PROPS</code> environment variable:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-symbol\">env:</span>\n    - name: DT_CUSTOM_PROP\n<span class=\"hljs-symbol\">        value:</span> <span class=\"hljs-string\">&quot;project=dt-orders service=frontend&quot;</span>\n</code></pre>\n<h3 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p>The <code>DT_CUSTOM_PROPS</code> is a special Dynatrace feature, that the OneAgent will automatically recognize and make Dynatrace tags for the process. You can read more details in the <a href=\"https://www.dynatrace.com/support/help/shortlink/process-group-properties#anchor_variables\">Dynatrace documentation</a></p>\n<h1 id=\"kubernetesrolebinding\">Kubernetes Role Binding</h1>\n<p>In Kubernetes, every pod is associated with a service account which is used to authenticate the pod's requests to the Kubernetes API. If not otherwise specified the pod uses the default service account of its namespace.</p>\n<ul>\n<li><p>Every namespace has its own set of service accounts and thus also its own namespace-scoped default service account. The labels of each pod for which the service account has view permissions will be imported into Dynatrace automatically.</p></li>\n<li><p>In order for Dynatrace to read the Kubernetes properties and annotations, you need to grant the Kubernetes default service account a viewer role into the <code>staging</code> namespace to enable this. We only have one namespace, but you will need to repeat these steps for all service accounts and namespaces you want to enable for Dynatrace within your environments.</p></li>\n</ul>\n<p>For the workshop, we already updated the required file with the <code>staging</code> namespace. Next you will run the setup script that will apply it to your cluster. Go ahead and open this folder and look at the <code>dynatrace-oneagent-metadata-viewer.yaml</code> file. </p>\n<ul>\n<li><a href=\"https://github.com/dt-alliances-workshops/azure-modernization-dt-orders-setup/tree/main/app-scripts/manifests\">https://github.com/dt-alliances-workshops/azure-modernization-dt-orders-setup/tree/main/app-scripts/manifests</a></li>\n</ul>\n<h2 id=\"runthescripttodeploythesampleapplication\">Run the script to deploy the sample application</h2>\n<p>Now that you understand the various files, lets go ahead and open up the <code>start-k8.sh</code> script from this folder:</p>\n<ul>\n<li><a href=\"https://github.com/dt-alliances-workshops/azure-modernization-dt-orders-setup/tree/main/app-scripts\">https://github.com/dt-alliances-workshops/azure-modernization-dt-orders-setup/tree/main/app-scripts</a></li>\n</ul>\n<p>This script automates a number of <code>kubectl</code> commands for the following:</p>\n<ol>\n<li>Create a namespace called <code>staging</code> where all these resources will reside</li>\n<li>Grant the Kubernetes default service account a viewer role into the <code>staging</code> namespace</li>\n<li>Create both the <code>deployment</code> and <code>service</code> Kubernetes objects for each of the sample</li>\n</ol>\n<p>When you are ready, back in the Azure shell, run these commands:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">cd</span> ~<span class=\"hljs-string\">/azure-modernization-dt-orders-setup/app-scripts</span>\n<span class=\"hljs-string\">./start-k8.sh</span>\n</code></pre>\n<p>Rerun this command until all the pods are in <code>Running</code> status.</p>\n<pre><code class=\"hljs\">kubectl -n staging <span class=\"hljs-builtin-name\">get</span> pods\n</code></pre>\n<p>The output should look like this:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-attribute\">NAME</span>                               READY   STATUS    RESTARTS   AGE\n<span class=\"hljs-attribute\">browser</span>-traffic-<span class=\"hljs-number\">5</span>b<span class=\"hljs-number\">9456875</span>d-ks<span class=\"hljs-number\">9</span>vw   <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">1</span>     Running   <span class=\"hljs-number\">0</span>          <span class=\"hljs-number\">30</span>h\n<span class=\"hljs-attribute\">catalog</span>-<span class=\"hljs-number\">7</span>dcf<span class=\"hljs-number\">64</span>cc<span class=\"hljs-number\">99</span>-hfrpg           <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">1</span>     Running   <span class=\"hljs-number\">0</span>          <span class=\"hljs-number\">2</span>d<span class=\"hljs-number\">8</span>h\n<span class=\"hljs-attribute\">customer</span>-<span class=\"hljs-number\">8464884799</span>-vljdx          <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">1</span>     Running   <span class=\"hljs-number\">0</span>          <span class=\"hljs-number\">2</span>d<span class=\"hljs-number\">8</span>h\n<span class=\"hljs-attribute\">frontend</span>-<span class=\"hljs-number\">7</span>c<span class=\"hljs-number\">466</span>b<span class=\"hljs-number\">9</span>d<span class=\"hljs-number\">69</span>-<span class=\"hljs-number\">9</span>ql<span class=\"hljs-number\">2</span>g          <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">1</span>     Running   <span class=\"hljs-number\">0</span>          <span class=\"hljs-number\">2</span>d<span class=\"hljs-number\">8</span>h\n<span class=\"hljs-attribute\">load</span>-traffic-<span class=\"hljs-number\">6886649</span>ddf-<span class=\"hljs-number\">76</span>pqf      <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">1</span>     Running   <span class=\"hljs-number\">0</span>          <span class=\"hljs-number\">2</span>d<span class=\"hljs-number\">8</span>h\n<span class=\"hljs-attribute\"><span class=\"hljs-nomarkup\">order</span></span>-<span class=\"hljs-number\">6</span>d<span class=\"hljs-number\">4</span>cd<span class=\"hljs-number\">477</span>cb-<span class=\"hljs-number\">9</span>bvn<span class=\"hljs-number\">4</span>             <span class=\"hljs-number\">1</span>/<span class=\"hljs-number\">1</span>     Running   <span class=\"hljs-number\">0</span>          <span class=\"hljs-number\">2</span>d<span class=\"hljs-number\">8</span>h\n</code></pre>\n<h3 id=\"technicalnote-1\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p>You can read more details on the Kubernetes installation in the <a href=\"https://www.dynatrace.com/support/help/technology-support/container-platforms/kubernetes/other-deployments-and-configurations/leverage-tags-defined-in-kubernetes-deployments/\">Dynatrace documentation</a></p>","activityList":[]},{"id":"4.6","name":"Review Kubernetes within Dynatrace","content":"<h2 id=\"reviewkuberneteswithindynatrace\">Review Kubernetes within Dynatrace</h2>\n<p>Now lets verify what happened within Dynatrace.</p>\n<ol>\n<li><p>From the Dynatrace Menu, click <code>Manage --&gt; Deployment status</code> to review OneAgent Deployment status</p></li>\n<li><p>Within the <code>Deployment status</code> page, next click on the <code>ActiveGate</code> option to review the Active Gate. </p></li>\n</ol>\n<h2 id=\"reviewkubernetesarchitecture\">Review Kubernetes Architecture</h2>\n<p>From the left-side menu in Dynatrace choose <code>Kubernetes</code> and navigate to the Kubernetes cluster page as shown below:</p>\n<p><strong>NOTE: Be sure that your management zone is NOT filtered!</strong></p>\n<p><img src=\"assets/lab2-k8s-layers.png\" alt=\"image\" /></p>\n<p><strong>1 - Kubernetes cluster</strong></p>\n<p>A summary the Kubernetes cluster is shown at the top of the Kubernetes dashboard.</p>\n<p><strong>2 - Nodes</strong></p>\n<p>The resources for the Cluster are summarized for the one-to-many hosts or Cluster nodes in this view.\nExplore specific node in the Node Analysis section, pick the analyze nodes button.\n<img src=\"assets/lab4-aks-nodeutiliz.png\" alt=\"image\" /></p>\n<p><strong>3 - Namespaces</strong></p>\n<p>Note: Namespaces are ways to partition your cluster resources to run multiple workloads (for example <code>application A</code> and <code>application B</code> workloads) on same cluster</p>\n<ol>\n<li>This workload section shows workloads over time</li>\n<li>In the Cluster workload section, pick the view all workloads button.</li>\n</ol>\n<p><img src=\"assets/lab4-aks-workload.png\" alt=\"image\" /></p>\n<p>In the filter, pick namespace then staging</p>\n<p><img src=\"assets/lab4-aks-workload-filter.png\" alt=\"image\" /></p>\n<p><strong>4 - Kubernetes workload</strong></p>\n<p>Pick the frontend to drill into.</p>\n<p><img src=\"assets/la4-aks-kubeworkload.png\" alt=\"image\" /></p>\n<p>Review the workload overview page to look at various metrics related to the workload.</p>\n<p>Click on Kubernetes POD to look at POD utilization metrics.</p>\n<p><img src=\"assets/lab4-aks-frontend-workload.png\" alt=\"image\" /></p>\n<p><strong>5 - POD</strong></p>\n<p>Review the POD overview page to look at various metrics related to the POD\nClick on Container next to look at container metrics</p>\n<p><img src=\"assets/lab4-aks-pod.png\" alt=\"image\" />\n </p>\n<p><strong>6 - Containers</strong> </p>\n<p>Referring to the diagram above, expand the properties and tags section to view:</p>\n<ol>\n<li>Container information</li>\n<li>Kubernetes information</li>\n<li>In the info graphic, pick the service to open the services list</li>\n<li>In the service list, click on k8-frontend service</li>\n</ol>\n<p><img src=\"assets/lab4-aks-container.png\" alt=\"image\" /></p>\n<p>Next click on 2 Services Icon to review the services running inside the container\nSelect the active front-end service.</p>\n<p><strong>7 - Service</strong></p>\n<p>This view should now look familiar. In Lab 1, we looked at the service for the frontend and backend.  Notice how the Kubernetes information is also available in the service properties.  </p>\n<p><img src=\"assets/aks-layer7-service.png\" alt=\"image\" /></p>","activityList":[]},{"id":"4.7","name":"Sample application Kubernetes details","content":"<h2 id=\"sampleapplicationkubernetesdetails\">Sample application Kubernetes details</h2>\n<p>Refer to this picture for a more detailed description of our setup. </p>\n<p><img src=\"assets/lab2-k8s-namespaces.png\" alt=\"image\" /></p>\n<p><strong>1 - Dynatrace Namespace</strong></p>\n<p>This <a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/\">Kubernetes Namespace</a> contains the pods and services that make up the Dynatrace Operator.</p>\n<p><strong>2 - Kubernetes nodes</strong></p>\n<p>Kubernetes runs your workload by placing containers into Pods to run on <a href=\"https://kubernetes.io/docs/concepts/architecture/nodes/\">Nodes</a>.</p>\n<p><strong>3 - Dynatrace</strong></p>\n<p>Dynatrace tenant where monitoring data is collected and analyzed.</p>\n<p><strong>4 - Cloud shell</strong></p>\n<p>The shell is configured with the <a href=\"https://kubernetes.io/docs/reference/kubectl/overview/\">kubectl</a> command line tool that lets you control Kubernetes clusters.</p>\n<p><strong>5 - Sample application namespace</strong></p>\n<p>This <a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/\">Kubernetes Namespace</a> contains the sample application pods and services.</p>\n<p><strong>6 - Sample application</strong></p>\n<p>The frontend service is exposed as a public IP and is accessible in a browser.</p>\n<h2 id=\"reviewsampleappinabrowser\">Review sample app in a browser</h2>\n<p>To view the application, we need to get the IP to the Kubernetes service for the sample application. To do this, we need to Azure CLI and run one kubernetes command.</p>\n<p>From the Azure CLI SSH command prompt type this command</p>\n<pre><code class=\"hljs\"><span class=\"hljs-symbol\">kubectl</span> -n staging <span class=\"hljs-meta\">get</span> <span class=\"hljs-keyword\">svc</span>\n</code></pre>\n<p>From the output, copy the entire value from EXTERNAL-IP and open it in a browser. This would be <code>http://11.22.33.11</code> for the example above.  The output and application should look like this:</p>\n<p><img src=\"assets/lab4-app-ip.png\" alt=\"image\" /> </p>\n<h2 id=\"exploresampleapp\">Explore Sample app</h2>\n<p>Use the menu on on the home page to navigate around the application and notice the URL for key functionality. You will see these URLs later as we analyze the application.</p>\n<ul>\n<li>Customer List = customer/list.html</li>\n<li>Customer Detail = customer/5.html</li>\n<li>Catalog List = catalog/list.html</li>\n<li>Catalog Search Form = catalog/searchForm.html</li>\n<li>Order List = order/list.html</li>\n<li>Order Form = order/form.html</li>\n</ul>\n<h3 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p>The application looks like this monolith, but notice how the home page shows the versions of the three running backend services. You will see these version updated automatically as we deploy new versions of the backend services.</p>","activityList":[]},{"id":"4.8","name":"Backtrace","content":"<h2 id=\"backtrace\">Backtrace</h2>\n<h2 id=\"openservicepage\">Open Service Page</h2>\n<p>First filter by <code>dt-orders-k8 management</code> zone.</p>\n<p><img src=\"assets/lab4-k8-mgmtzone-filter.png\" alt=\"image\" /></p>\n<p>Pick the <code>order</code> service.</p>\n<p><img src=\"assets/lab4-k8-service-filter.png\" alt=\"image\" /></p>\n<p>On this service, we can quickly review the inbound and outbound dependencies.</p>\n<p>Referring to the picture, within the services infographic, click on the \"services\" square to get a list of the services that the order service calls.</p>\n<p><img src=\"assets/lab4-k8-service-view.png\" alt=\"image\" /></p>\n<h2 id=\"openbacktracepage\">Open Backtrace Page</h2>\n<p>To see the backtrace page, just click on the Analyze Backtrace button.</p>\n<p>You should be on the service backtrace page where you will see information for this specific service.</p>\n<p>This will get more interesting in the next lab, but for the monolith backend, we can see that the backtrace is as follows:</p>\n<p>1 . The starting point is the backend</p>\n<p>2 . Backend service is called by the front-end</p>\n<p>3 . Front-end is a where end user requests start and the user sessions get captured </p>\n<p>4 . My web application is the default application that Dynatrace creates</p>\n<p><img src=\"assets/lab4-k8-service-backflow.png\" alt=\"image\" /></p>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>The service flow and service backtrace give you a complete picture of interdependency to the rest of the environment architecture at host, processes, services, and application perspectives.</p>","activityList":[]},{"id":"4.9","name":"Serviceflow","content":"<h2 id=\"serviceflow\">Serviceflow</h2>\n<h2 id=\"analyzetheserviceflow\">Analyze the Service Flow</h2>\n<p>Now that we are back on the frontend service, let's look at the service flow to see what's different now. Just click on the view service flow button to open this.</p>\n<p><img src=\"assets/lab4-serviceflow.png\" alt=\"image\" /> </p>\n<h2 id=\"responsetimeperspective\">Response time perspective</h2>\n<p>You should now be on the Service flow page.</p>\n<p>Right away, we can see how this application is structured:</p>\n<ul>\n<li>Frontend calls order, customer, and catalog service</li>\n<li>Order service calls order and customer service</li>\n</ul>\n<p>Something you would never know from the application web UI!</p>\n<p><img src=\"assets/lab4-serviceflow-responsetime.png\" alt=\"image\" /></p>\n<p>Refer to the picture above:</p>\n<ol>\n<li>We are viewing the data from a Response time perspective. Shortly, we will review the Throughput perspective.</li>\n<li>Click on the boxes to expand the response time metrics. Most of the response time is spent in the order service and the least in the customer services. And as in the simple version of the application, a very small amount of the response time is spent in the databases.</li>\n</ol>\n<h2 id=\"throughputperspective\">Throughput perspective</h2>\n<p><img src=\"assets/lab4-serviceflow-thoroughput.png\" alt=\"image\" />   </p>\n<p>Refer to the picture above:</p>\n<ol>\n<li>Change to the Throughput perspective by clicking on the box</li>\n<li>Click on the boxes to expand the metrics to see the number of requests and average response times going to each service</li>\n</ol>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>Reviewing the architecture before and after changes is now as easy as a few clicks!</p>","activityList":[]},{"id":"4.10","name":"Summary","content":"<h2 id=\"summary\">Summary</h2>\n<p>While migrating to the cloud, you want to evaluate if your migration goes according to the plan, whether the services are still performing well or even better than before, and whether your new architecture is as efficient as the blueprint suggested. Dynatrace helps you validate all these steps automatically, which helps speed up the migration and validation process.</p>\n<p>Having the ability to understand service flows enables us to make smarter re-architecture and re-platforming decisions.  With support for new technologies like Kubernetes, you have confidence to modernize with a platform that spans the old and the new. </p>\n<h2 id=\"checklist\">Checklist</h2>\n<p>In this section, you should have completed the following:</p>\n<p>🔷 Review Dynatrace OneAgent</p>\n<p>🔷 Review real-time data now available for the sample application</p>\n<p>🔷 Review how Dynatrace helps with modernization planning</p>","activityList":[]}]},{"id":"5","name":"Lab 3 - Davis AI","content":"<h2 id=\"lab3davisai\">Lab 3 - Davis AI</h2>\n<p>Often the monitoring tools organizations use simply don’t work in the complex ecosystem of microservices and for technologies like Kubernetes.</p>\n<p>Finding the root cause of problems is harder than ever before and the effort required goes beyond what is humanly possible when the application spans to the cloud providers and data centers and the explosion of interconnected services. There are more possibilities for failures and more hiding spots for problems to sneak into the environment when software driving more than just the application.</p>\n<p>In this lab, we will trigger a few problem and see how troubleshooting time is Significantly reduced by letting AI automatically detect problems and pinpoints the root cause, explaining business impact with no manual configurations.</p>\n<h2 id=\"objectivesofthislab\">Objectives of this Lab</h2>\n<p>🔷 Enable a problem in the application and walk through what <a href=\"https://www.dynatrace.com/platform/artificial-intelligence/\">Dynatrace Davis</a> found</p>","activityList":[{"id":"5.1","name":"Enable application problems","content":"<h2 id=\"enableapplicationproblems\">Enable application problems</h2>\n<p>The Dynatrace Orders sample application has pre-built problems with different versions.  </p>\n<p>These problems can be enabled with a <code>set-version</code> URL that can be used to change the version and thus the behavior of the application. Version 1 is the <strong>\"normal\"</strong> behavior and problems are enabled by setting the version to a value such as 2 or 3.</p>\n<p>In the next section, you will run a unix script that sets these problems.</p>\n<h2 id=\"monolithdeploymentbackendservicehighresponsetimeforallrequests\">Monolith deployment - backend service - High Response time for all requests</h2>\n<p><img src=\"assets/lab3-backend-problem-usecase.png\" alt=\"image\" /></p>\n<h2 id=\"servicedeploymentorderserviceexceptionsforallorderrelatedrequests\">Service deployment - order service - exceptions for all order related requests</h2>\n<p><img src=\"assets/lab3-order-problem-usecase.png\" alt=\"image\" /></p>\n<h2 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h2>\n<p>Refer to <a href=\"https://github.com/dt-orders/overview\">dt-orders overview README</a> for more details of the various versions.</p>","activityList":[]},{"id":"5.2","name":"Dynatrace Events","content":"<h2 id=\"dynatraceevents\">Dynatrace Events</h2>\n<p>Before we get to the problems, let's review <a href=\"https://www.dynatrace.com/support/help/dynatrace-api/environment-api/events/post-event/\">Dynatrace information events</a>.</p>\n<p>Dynatrace information events enable continuous delivery tools, such as Azure DevOps, to provide additional details for Dynatrace. Here is an example of two informational events for deployment and performance testing being be sent to Dynatrace.</p>\n<p><img src=\"assets/lab3-pipeline.png\" alt=\"image\" /></p>\n<p>There are several Dynatrace information event types:</p>\n<ul>\n<li>CUSTOM_ANNOTATION</li>\n<li>CUSTOM_CONFIGURATION</li>\n<li>CUSTOM_DEPLOYMENT</li>\n<li>CUSTOM_INFO</li>\n<li>MARKED<em>FOR</em>TERMINATION</li>\n</ul>\n<p>Below we can see both the CUSTOM<em>INFO (#1) and CUSTOM</em>DEPLOYMENT events (#2) for a service that was the root cause to a problem the Dynatrace AI engine, Davis®, determined.</p>\n<p><img src=\"assets/lab3-problemcard-events.png\" alt=\"image\" /></p>\n<p>Each event has a timestamp, event source, a few standardized fields (depending on the event type), and the option to add additional custom fields.  See <a href=\"https://www.dynatrace.com/support/help/shortlink/api-events-post-event#parameters-mapping\">this table</a> for details.  Here are two example events.  NOTE: the URL back to the pipeline making the change.</p>\n<p><img src=\"assets/lab3-event-examples.png\" alt=\"image\" /></p>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>Having information events speeds up triage by adding context to what’s happening with the application. Just imagine getting alerted about an issue and immediately seeing a load test or deployment took place, and in one click of the event, review the system, job, and team responsible!</p>\n<h2 id=\"dynatracetags\">Dynatrace tags</h2>\n<p>When creating information events, you must target the entities to receive the event so that it’s only associated with the relevant component. That is where Dynatrace tags come in.</p>\n<p>In a nutshell, tags in Dynatrace are labels or markers used for organizing entities in large monitoring environments. Below shows a few tags for my catalog service: <code>stage:staging</code> and <code>service:catalog-service</code></p>\n<p><img src=\"assets/lab3-tags.png\" alt=\"image\" /></p>\n<h2 id=\"apicallexample\">API call Example</h2>\n<pre><code class=\"hljs\">curl -X POST \\\n  https:<span class=\"hljs-comment\">//mySampleEnv.live.dynatrace.com/api/v1/events \\</span>\n  -H <span class=\"hljs-string\">&#x27;Authorization: Api-token abcdefjhij1234567890&#x27;</span> \\\n  -H <span class=\"hljs-string\">&#x27;Content-Type: application/json&#x27;</span> \\  \n  -d <span class=\"hljs-string\">&#x27;{\n  &quot;</span>eventType<span class=\"hljs-string\">&quot;: &quot;</span>CUSTOM_ANNOTATION<span class=\"hljs-string\">&quot;,\n  &quot;</span>timeoutMinutes<span class=\"hljs-string\">&quot;: 0,\n  &quot;</span>attachRules<span class=\"hljs-string\">&quot;: {\n\n    &quot;</span>tagRule<span class=\"hljs-string\">&quot;: [\n      {\n        &quot;</span>meTypes<span class=\"hljs-string\">&quot;: [\n          &quot;</span>CUSTOM_DEVICE<span class=\"hljs-string\">&quot;\n        ],\n        &quot;</span>tags<span class=\"hljs-string\">&quot;: [\n          {\n            &quot;</span>context<span class=\"hljs-string\">&quot;: &quot;</span>CONTEXTLESS<span class=\"hljs-string\">&quot;,\n            &quot;</span>key<span class=\"hljs-string\">&quot;: &quot;</span>IG-test<span class=\"hljs-string\">&quot;\n          }\n        ]\n      }\n    ]\n  },\n  &quot;</span>source<span class=\"hljs-string\">&quot;: &quot;</span>OpsControl<span class=\"hljs-string\">&quot;,\n  &quot;</span>annotationType<span class=\"hljs-string\">&quot;: &quot;</span>defect<span class=\"hljs-string\">&quot;,\n  &quot;</span>annotationDescription<span class=\"hljs-string\">&quot;: &quot;</span>coffee machine is defective<span class=\"hljs-string\">&quot;\n}&#x27;</span>\n</code></pre>","activityList":[]},{"id":"5.3","name":"Backend service problem","content":"<h2 id=\"backendserviceproblem\">Backend service problem</h2>\n<p>Now we are going to set the <code>backend</code> service version that will cause high response time for all backend requests.</p>\n<h2 id=\"1enabletheproblempattern\">1. Enable the problem pattern</h2>\n<p>To automate the version change, a unix script is provided that will do the following:</p>\n<ul>\n<li>Call the <code>backend/set-version</code> URL set the backend version</li>\n<li>Send a Dynatrace <code>CUSTOM_DEPLOYMENT</code> event indicating the change</li>\n</ul>\n<p>From the Azure shell, run these commands to set the version:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-string\">cd</span> ~/<span class=\"hljs-string\">azure-modernization-dt-orders-setup</span>/<span class=\"hljs-string\">learner-scripts</span>\n./<span class=\"hljs-built_in\">set-version.sh</span> <span class=\"hljs-string\">backend</span> <span class=\"hljs-string\">2</span>\n</code></pre>\n<p>Review the output to ensure the change was made successfully.  I should look like this with numerical values at the end for <code>Response Data: storedEventIds</code>:</p>\n<pre><code class=\"hljs\">@Azure:~<span class=\"hljs-regexp\">/azure-modernization-dt-orders-setup/</span>learner-scripts$ ./set-version.sh backend <span class=\"hljs-number\">2</span>\n\nRetrieving dt-orders-monolith Public IP\n=================================================================\nSetting Service Version\nSERVICE         = backend\nNEW_VERSION     = <span class=\"hljs-number\">2</span>\nSET_VERSION_URL = http:<span class=\"hljs-regexp\">//</span><span class=\"hljs-number\">1.1</span>.<span class=\"hljs-number\">1.1</span><span class=\"hljs-regexp\">/backend/</span>setversion/<span class=\"hljs-number\">2</span>\n=================================================================\nSet backend to <span class=\"hljs-number\">2</span> was successful\n=================================================================\nSending Dynatrace Deployment event\nDT_API_URL                 = https:<span class=\"hljs-regexp\">//</span>xxx.live.dynatrace.com<span class=\"hljs-regexp\">/api/</span>v1/events\nDEPLOYMENT_NAME            = Set backend to version <span class=\"hljs-number\">2</span>\nDEPLOYMENT_VERSION         = <span class=\"hljs-number\">2</span>\nDEPLOYMENT_PROJECT         = dt-orders\nCI_BACK_LINK               = http:<span class=\"hljs-regexp\">//</span><span class=\"hljs-number\">1.1</span>.<span class=\"hljs-number\">1.1</span>\n=================================================================\nPush Event POST_DATA\n{ <span class=\"hljs-string\">&quot;eventType&quot;</span> : <span class=\"hljs-string\">&quot;CUSTOM_DEPLOYMENT&quot;</span>, <span class=\"hljs-string\">&quot;source&quot;</span> : <span class=\"hljs-string\">&quot;Custom Unix Shell Script&quot;</span> , <span class=\"hljs-string\">&quot;deploymentName&quot;</span> : <span class=\"hljs-string\">&quot;Set backend to version 2&quot;</span>, <span class=\"hljs-string\">&quot;deploymentVersion&quot;</span> : <span class=\"hljs-string\">&quot;2&quot;</span> , <span class=\"hljs-string\">&quot;deploymentProject&quot;</span> :<span class=\"hljs-string\">&quot;dt-orders&quot;</span> , <span class=\"hljs-string\">&quot;ciBackLink&quot;</span> : <span class=\"hljs-string\">&quot;http://1.1.1.1&quot;</span>, <span class=\"hljs-string\">&quot;customProperties&quot;</span>: { <span class=\"hljs-string\">&quot;Example Custom Property 1&quot;</span> : <span class=\"hljs-string\">&quot;Example Custom Value 1&quot;</span>, <span class=\"hljs-string\">&quot;Example Custom Property 2&quot;</span> : <span class=\"hljs-string\">&quot;Example Custom Value 2&quot;</span>, <span class=\"hljs-string\">&quot;Example Custom Property 3&quot;</span> : <span class=\"hljs-string\">&quot;Example Custom Value 3&quot;</span> }, <span class=\"hljs-string\">&quot;attachRules&quot;</span> : { <span class=\"hljs-string\">&quot;tagRule&quot;</span> : [ { <span class=\"hljs-string\">&quot;meTypes&quot;</span>:[<span class=\"hljs-string\">&quot;PROCESS_GROUP_INSTANCE&quot;</span>], <span class=\"hljs-string\">&quot;tags&quot;</span>: [ { <span class=\"hljs-string\">&quot;context&quot;</span>: <span class=\"hljs-string\">&quot;CONTEXTLESS&quot;</span>, <span class=\"hljs-string\">&quot;key&quot;</span>: <span class=\"hljs-string\">&quot;service&quot;</span>, <span class=\"hljs-string\">&quot;value&quot;</span>: <span class=\"hljs-string\">&quot;backend&quot;</span> }, { <span class=\"hljs-string\">&quot;context&quot;</span>: <span class=\"hljs-string\">&quot;CONTEXTLESS&quot;</span>, <span class=\"hljs-string\">&quot;key&quot;</span>: <span class=\"hljs-string\">&quot;project&quot;</span>, <span class=\"hljs-string\">&quot;value&quot;</span>: <span class=\"hljs-string\">&quot;dt-orders&quot;</span> }, { <span class=\"hljs-string\">&quot;context&quot;</span>: <span class=\"hljs-string\">&quot;CONTEXTLESS&quot;</span>, <span class=\"hljs-string\">&quot;key&quot;</span>: <span class=\"hljs-string\">&quot;stage&quot;</span>, <span class=\"hljs-string\">&quot;value&quot;</span>: <span class=\"hljs-string\">&quot;production&quot;</span> } ]} ]} } }\n\nResponse Data\n{<span class=\"hljs-string\">&quot;storedEventIds&quot;</span>:[<span class=\"hljs-number\">8663164135574257870</span>,-<span class=\"hljs-number\">5988376401319068441</span>],<span class=\"hljs-string\">&quot;storedIds&quot;</span>:[<span class=\"hljs-string\">&quot;8663164135574257870_1628095127627&quot;</span>,<span class=\"hljs-string\">&quot;-5988376401319068441_1628095127627&quot;</span>],<span class=\"hljs-string\">&quot;storedCorrelationIds&quot;</span>:[]}\n</code></pre>\n<h2 id=\"2viewappinbrowser\">2. View app in browser</h2>\n<p>The event has the URL back to the sample application, so just click that if you don't have the sample app up already.  You should see <code>version 2</code> for the customer app now too.</p>\n<p><img src=\"assets/lab3-app-backend-version-2.png\" alt=\"image\" /></p>\n<h2 id=\"3reviewproblemindynatrace\">3. Review problem in Dynatrace</h2>\n<p>The problem may take a minute to show up, but this is what the problem will look like once it does. Also, you may see two problems that eventually get merged into one as Dynatrace is performing the problem analysis.</p>\n<ol>\n<li>Impact summary - multiple service impact</li>\n<li>Root cause</li>\n</ol>\n<p><img src=\"assets/lab3-backend-problem.png\" alt=\"image\" /></p>\n<h2 id=\"4analyzeproblemtopfindings\">4. Analyze problem - top findings</h2>\n<p>Click on the <code>Analyze Response Time Degradation</code> button to view the real issue with the request.</p>\n<p>Here you can see how Dynatrace automatically analyzes the problem and lets you know whether the problem is related to code, waiting, or other services and queues.</p>\n<p>Click in the <code>active wait time</code> line with the top findings to open the execution time breakdown detail.</p>\n<p><img src=\"assets/lab3-backend-analysis.png\" alt=\"image\" /></p>\n<h2 id=\"5analyzeproblemexecutiontimebreakdown\">5. Analyze problem - execution time breakdown</h2>\n<p>Dynatrace automatically shows the breakdown of the execution time.  To see more, click the <code>View method hotspots</code> button.</p>\n<p><img src=\"assets/lab3-backend-hotspots.png\" alt=\"image\" /></p>\n<h2 id=\"6analyzeproblemhotspots\">6. Analyze problem - hot spots</h2>\n<p>Here the code call breakdown is shown and by expanding this tree, you can locate the method where the slow down is occurring.  <strong>NOTE: You will need to expand several stack frames to get to method causing the slow down.</strong></p>\n<p><img src=\"assets/lab3-backend-analysis-trace.png\" alt=\"image\" /></p>\n<h2 id=\"7analyzeproblemimpact\">7. Analyze problem impact</h2>\n<p>From the breadcrumb menu, click on the <code>backend</code> to open the service page.</p>\n<p><img src=\"assets/lab3-backend-breadcrumb.png\" alt=\"image\" /></p>\n<p>Then click on the response time box in the Dynamic web requests section to open the service details page.  You can see exactly when the problem started.</p>\n<p><img src=\"assets/lab3-backend-problem-details.png\" alt=\"image\" /></p>\n<h2 id=\"8disabletheproblempattern\">8. Disable the problem pattern</h2>\n<p>From the Azure shell run these commands to set the version back to version 1</p>\n<pre><code class=\"hljs\"><span class=\"hljs-string\">cd</span> ~/<span class=\"hljs-string\">azure-modernization-dt-orders-setup</span>/<span class=\"hljs-string\">learner-scripts</span>\n./<span class=\"hljs-built_in\">set-version.sh</span> <span class=\"hljs-string\">backend</span> <span class=\"hljs-string\">1</span>\n</code></pre>\n<p>Ensure there are numerical values at the end for <code>Response Data: storedEventIds</code> like:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-symbol\">Response</span> <span class=\"hljs-symbol\">Data</span>\n{<span class=\"hljs-string\">&quot;storedEventIds&quot;</span>:[<span class=\"hljs-number\">8663164135574257870</span>,<span class=\"hljs-number\">-5988376401319068441</span>],<span class=\"hljs-string\">&quot;storedIds&quot;</span>:[<span class=\"hljs-string\">&quot;8663164135574257870_1628095127627&quot;</span>,<span class=\"hljs-string\">&quot;-5988376401319068441_1628095127627&quot;</span>],<span class=\"hljs-string\">&quot;storedCorrelationIds&quot;</span>:[]}\n</code></pre>\n<h2 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h2>\n<p><strong>Why does the problem card say 'Custom Threshold'?</strong></p>\n<p>The Dynatrace AI engine is evaluating metrics and dependencies for daily and weekly traffic patterns.  Since we just setup our sample application, there is not a lot of history to review. We setup a fixed threshold as a global service setting.</p>\n<p>To review this setting, on the left side menu, click <code>settings</code>, click <code>Anomaly Detection</code> and the the <code>Services</code> setting.</p>\n<p><img src=\"assets/lab3-global-anomoly-rules.png\" alt=\"image\" /></p>\n<p>Learn more about how How problems are detected and analyzed in the <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/problem-detection-and-analysis/problem-detection/automated-multi-dimensional-baselining/\">Dynatrace Docs</a></p>","activityList":[]},{"id":"5.4","name":"Order service problem","content":"<h2 id=\"orderserviceproblem\">Order service problem</h2>\n<p>Now we are going to set the <code>order</code> service version that will cause failures on the all requests.</p>\n<h2 id=\"1enabletheproblempattern\">1. Enable the problem pattern</h2>\n<p>To automate the version change, a unix script is provided that will do the following:</p>\n<ul>\n<li>Call the <code>order/set-version</code> URL to set the order-service version</li>\n<li>Send a Dynatrace <code>CUSTOM_DEPLOYMENT</code> event indicating the change</li>\n</ul>\n<p>From the Azure shell run these commands to set the version:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-string\">cd</span> ~/<span class=\"hljs-string\">azure-modernization-dt-orders-setup</span>/<span class=\"hljs-string\">learner-scripts</span>\n./<span class=\"hljs-built_in\">set-version.sh</span> <span class=\"hljs-string\">k8-order</span> <span class=\"hljs-string\">3</span>\n</code></pre>\n<p>Ensure there are numerical values at the end for <code>Response Data: storedEventIds</code> like:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-symbol\">Response</span> <span class=\"hljs-symbol\">Data</span>\n{<span class=\"hljs-string\">&quot;storedEventIds&quot;</span>:[<span class=\"hljs-number\">8663164135574257870</span>,<span class=\"hljs-number\">-5988376401319068441</span>],<span class=\"hljs-string\">&quot;storedIds&quot;</span>:[<span class=\"hljs-string\">&quot;8663164135574257870_1628095127627&quot;</span>,<span class=\"hljs-string\">&quot;-5988376401319068441_1628095127627&quot;</span>],<span class=\"hljs-string\">&quot;storedCorrelationIds&quot;</span>:[]}\n</code></pre>\n<h2 id=\"2viewchangeindynatrace\">2. View change in Dynatrace</h2>\n<p>From the left side menu, navigate to the <code>Releases</code> page.  Here you will see how Dynatrace detected the versions of monitored processes.  It may take a minute, but you will see the version change in the <code>Real-time inventory</code> section and a new event in the <code>Release events</code> section.</p>\n<p><strong>NOTE</strong> Be sure to adjust the management zone to <code>dt-orders-k8</code></p>\n<p><img src=\"assets/lab3-release-order.png\" alt=\"image\" /></p>\n<p>If you expand the event, you should see something like this</p>\n<p><img src=\"assets/lab3-release-order-event.png\" alt=\"image\" /></p>\n<h2 id=\"2viewappinbrowser\">2. View app in browser</h2>\n<p>The event has the URL back to the sample application, so just click that if you don't have the sample app up already.  You should see <code>version 3</code> for the order app now too.</p>\n<p><img src=\"assets/lab3-app-ui-order-version-3.png\" alt=\"image\" /></p>\n<h2 id=\"3reviewproblemindynatrace\">3. Review problem in Dynatrace</h2>\n<p>The problem may take a minute to show up, but this is what the problem will look like once it does. Also, you may see two problems that eventually get merged into one as Dynatrace is performing the problem analysis.</p>\n<ol>\n<li>Problem card windows and impact summary</li>\n<li>Root cause</li>\n<li>Deployment event as additional context</li>\n</ol>\n<p><img src=\"assets/lab3-order-problem.png\" alt=\"image\" /></p>\n<h2 id=\"4analyzeproblem\">4. Analyze problem</h2>\n<p>Referring to #4 in the picture above, click on the <code>Analyze failure rate degradation</code> button.</p>\n<p>Right away we can see that there were exceptions in the code and the <code>details</code> button can be clicked to see the code stack trace.</p>\n<p><img src=\"assets/lab3-order-problem-detail.png\" alt=\"image\" /></p>\n<h2 id=\"5analyzeproblemimpact\">5. Analyze problem impact</h2>\n<p>From the breadcrumb menu, click on the <code>order</code> to open the service page.</p>\n<p><img src=\"assets/lab3-order-menu.png\" alt=\"image\" /></p>\n<p>On this page, notice the failure rate.  </p>\n<p><img src=\"assets/lab3-order-problem-service.png\" alt=\"image\" /></p>\n<p>Then click on the failure rate box to open the service details page.  You can see exactly when the problem started.</p>\n<p><img src=\"assets/lab3-order-problem-requests.png\" alt=\"image\" /></p>\n<h2 id=\"4disabletheproblempattern\">4. Disable the problem pattern</h2>\n<p>From the Azure shell run these commands to set the version back to version 1</p>\n<pre><code class=\"hljs\"><span class=\"hljs-string\">cd</span> ~/<span class=\"hljs-string\">azure-modernization-dt-orders-setup</span>/<span class=\"hljs-string\">learner-scripts</span>\n./<span class=\"hljs-built_in\">set-version.sh</span> <span class=\"hljs-string\">k8-order</span> <span class=\"hljs-string\">1</span>\n</code></pre>\n<p>Ensure there are numerical values at the end for <code>Response Data: storedEventIds</code> like:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-symbol\">Response</span> <span class=\"hljs-symbol\">Data</span>\n{<span class=\"hljs-string\">&quot;storedEventIds&quot;</span>:[<span class=\"hljs-number\">8663164135574257870</span>,<span class=\"hljs-number\">-5988376401319068441</span>],<span class=\"hljs-string\">&quot;storedIds&quot;</span>:[<span class=\"hljs-string\">&quot;8663164135574257870_1628095127627&quot;</span>,<span class=\"hljs-string\">&quot;-5988376401319068441_1628095127627&quot;</span>],<span class=\"hljs-string\">&quot;storedCorrelationIds&quot;</span>:[]}\n</code></pre>\n<p>Dynatrace will automatically close the problem once it detects things are back to normal.</p>","activityList":[]},{"id":"5.5","name":"Summary","content":"<h2 id=\"summary\">Summary</h2>\n<p>In this section, you should have completed the following:</p>\n<p>🔷 Enable a problem in the application and walk through what <a href=\"https://www.dynatrace.com/platform/artificial-intelligence/\">Dynatrace Davis</a> found</p>","activityList":[]}]},{"id":"6","name":"Lab 4 - Operate","content":"<h2 id=\"lab4operate\">Lab 4 - Operate</h2>\n<p>In order to do more with less and scale, organizations must transcend IT silos, foster collaboration and improve productivity. Automation and a common data model are key components of this, but it takes platforms that support operational teams and workflows.</p>\n<h2 id=\"objectivesofthislab\">Objectives of this Lab</h2>\n<p>🔷 Review how Dynatrace integrates with <a href=\"https://azure.microsoft.com/en-us/services/monitor/\">Azure monitor</a></p>\n<p>🔷 Review how Azure monitor metrics can be configured as <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/problem-detection-and-analysis/problem-detection/metric-events-for-alerting/\">Metric events for alerts</a></p>\n<p>🔷 Examine Dynatrace Service Level Objectives (SLOs)</p>\n<p>🔷 Create a custom dashboard with SLOs </p>","activityList":[{"id":"6.1","name":"Lab setup","content":"<h2 id=\"labsetup\">Lab setup</h2>\n<p>Referring to the picture below, here are the components for this lab.</p>\n<p><img src=\"assets/lab3-setup.png\" alt=\"image\" /></p>\n<p><strong>#1 . Azure</strong></p>\n<p>Azure cloud platform where Azure services produce metrics that are sent to Azure monitor.</p>\n<p><strong>#2 . Azure VM running ActiveGate</strong></p>\n<p>A <a href=\"https://www.dynatrace.com/support/help/setup-and-configuration/dynatrace-activegate/basic-concepts/when-do-i-need-to-install-an-activegate/#anchor-route\">Dynatrace ActiveGate</a> process required to monitor Azure monitor data. </p>\n<p><strong>#3 . Dynatrace</strong></p>\n<p>Dynatrace tenant where monitoring data is collected and analyzed.</p>\n<p><strong>#4 . Dynatrace Azure Dashboard</strong></p>\n<p>Out of the box dashboard for each configured Azure subscription.</p>\n<h2 id=\"azuredashboard\">Azure Dashboard</h2>\n<p>In addition to monitoring your Azure workloads using OneAgent, Dynatrace provides integration with <a href=\"https://docs.microsoft.com/en-us/azure/azure-monitor/overview\">Azure Monitor</a> which adds infrastructure monitoring to gain insight even into serverless application scenarios.</p>\n<p>The integration uses Azure Monitor metrics for service insights, as well as Azure Resource Manager (ARM) to gather metadata.</p>\n<p><img src=\"assets/lab3-azure-dashboard.png\" alt=\"image\" /></p>\n<h2 id=\"reviewyourenvironment\">Review your environment</h2>\n<ol>\n<li>From the left side menu in Dynatrace, click the <code>Azure</code> menu item.</li>\n<li>Scroll down, and in the <code>Environment dynamics</code> action click on the <code>eastus</code> region to open the virtual machine regional page  </li>\n</ol>\n<h3 id=\"virtualmachineregionalpage\">Virtual machine regional page</h3>\n<p>Notice the following details:</p>\n<ol>\n<li>A summary of type and status is shown</li>\n<li>A running average for virtual machines</li>\n<li>A table of host with Azure monitor metrics summarized.  Notice that both VMs with and without an OneAgent are both shown</li>\n</ol>\n<p><img src=\"assets/lab3-host-list.png\" alt=\"image\" /></p>\n<h3 id=\"virtualmachinedetails\">Virtual machine details</h3>\n<p>Click on the <code>dt-orders-active-gate</code> host to open the host page.</p>\n<p>Notice the following details:</p>\n<ol>\n<li>Expand the properties to see more details</li>\n<li>All the Azure monitor metrics are viewable as time-series data</li>\n</ol>\n<p><img src=\"assets/lab3-host-detail.png\" alt=\"image\" /></p>\n<h3 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p>See the <a href=\"https://www.dynatrace.com/support/help/technology-support/cloud-platforms/microsoft-azure-services/set-up-integration-with-azure-monitor/\">Dynatrace Docs</a> for more details on the setup.</p>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>Dynatrace brings value by enriching the data from Azure Monitor/App Insights and extending observability into the platform with additional metrics for cloud infrastructure, load balancers, API Management Services, and more.​</p>\n<p>These metrics are managed by Dynatrace's AI engine automatically and this extended observability improves operations, reduces MTTR and increases innovation. </p>","activityList":[]},{"id":"6.2","name":"Custom Alerting","content":"<h2 id=\"customalerting\">Custom Alerting</h2>\n<p>Dynatrace Davis automatically analyzes abnormal situations within your IT infrastructure and attempts to identify any relevant impact and root cause. Davis relies on a wide spectrum of information sources, such as a transactional view of your services and applications, as well as on events raised on individual nodes within your Smartscape topology.</p>\n<p>There are two main sources for single events in Dynatrace:</p>\n<ul>\n<li>Metric-based events (events that are triggered by a series of measurements) and\nevents that are independent of any metric (for example, process crashes, deployment changes, and VM motion events)</li>\n<li>Custom metric events are configured in the global settings of your environment and are visible to all Dynatrace users in your environment.</li>\n</ul>\n<h2 id=\"setupcustomeventsforalerting\">Setup Custom Events for Alerting</h2>\n<p>1 . To add custom alerts, navigate to <code>Settings --&gt; Anomaly Detection --&gt; Custom Events for Alerting</code> menu. </p>\n<p>2 . Click the <code>Create custom event for alerting</code> button.</p>\n<p><img src=\"assets/lab3-alert-create.png\" alt=\"image\" /></p>\n<p>3 . In the <code>Category</code> dropdown list, select <code>Cloud Platform</code> and in the <code>Metric</code> dropdown list, type <code>Percentage CPU</code> and pick the <code>Cloud platforms &gt; Azure &gt; Virtual Machine &gt; cpuUsage</code> option and Pick <code>Average</code></p>\n<p><img src=\"assets/lab3-vm-alert.png\" alt=\"image\" /></p>\n<p>4 . Click <code>Add rule-base</code> button and update as shown below</p>\n<p><img src=\"assets/lab4-custom-alert-filter.png\" alt=\"image\" /></p>\n<p>5 . Choose <code>Static threshold</code> and update as shown below</p>\n<p><img src=\"assets/lab4-custom-alert-threashold.png\" alt=\"image\" /></p>\n<p>6 . Add the <code>Event Description</code> to have the <code>title</code> and <code>severity = CUSTOM ALERT</code> as shown below.</p>\n<p><img src=\"assets/lab4-custom-alert-message.png\" alt=\"image\" /></p>\n<p>Notice the <code>Alert preview</code> chart that helps you in reviewing these settings</p>\n<p><img src=\"assets/lab3-vm-alert-chart.png\" alt=\"image\" /></p>\n<p>7 . Save your changes</p>\n<p>8 . Add another rule, with everything the same, except for the <code>Event Description</code> to have the <code>title</code> and <code>severity = RESOURCE</code> as shown below.</p>\n<p><img src=\"assets/lab4-custom-resource-message.png\" alt=\"image\" /></p>\n<p>9 . Save your changes and the list should look as shown below.</p>\n<p><img src=\"assets/lab4-custom-alert-list.png\" alt=\"image\" /></p>\n<h2 id=\"triggeracpuproblem\">Trigger a CPU problem</h2>\n<p>To enable a problem, you will SSH into a VM and run the <a href=\"https://en.wikipedia.org/wiki/Yes_(Unix)\">yes</a> utility in the background that will cause high CPU.  </p>\n<p>1 . From the Azure shell, SSH to the monolith virtual machine with this command:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">cd</span> ~<span class=\"hljs-string\">/azure-modernization-dt-orders-setup/learner-scripts</span>\n<span class=\"hljs-string\">./show-app-urls.sh</span>\n</code></pre>\n<p>Using the IP address for the MONOLITH host, run this command:</p>\n<pre><code class=\"hljs\">ssh <span class=\"hljs-symbol\">workshop@<span class=\"hljs-keyword\">&lt;PUBLIC-IP&gt;</span></span>\n</code></pre>\n<p><strong>NOTE: Ask instructor for password</strong></p>\n<p>2 . Once SSH session is established, copy all these lines and run them:</p>\n<pre><code class=\"hljs\">yes &gt; <span class=\"hljs-regexp\">/dev/</span><span class=\"hljs-literal\">null</span> &amp;\nyes &gt; <span class=\"hljs-regexp\">/dev/</span><span class=\"hljs-literal\">null</span> &amp;\nyes &gt; <span class=\"hljs-regexp\">/dev/</span><span class=\"hljs-literal\">null</span> &amp;\n</code></pre>\n<p>To verify, run this command:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-attribute\">ps</span> -ef | grep <span class=\"hljs-literal\">yes</span>\n</code></pre>\n<p>The output should look like this:</p>\n<pre><code class=\"hljs\">azureuser:~$ <span class=\"hljs-literal\">yes</span> &gt; /dev/<span class=\"hljs-literal\">null</span> &amp;\n[1] 138465\nazureuser:~$ <span class=\"hljs-literal\">yes</span> &gt; /dev/<span class=\"hljs-literal\">null</span> &amp;\n[2] 138488\nazureuser:~$ <span class=\"hljs-literal\">yes</span> &gt; /dev/<span class=\"hljs-literal\">null</span> &amp;\n[3] 138495\n\nazureuser:~$ ps -ef | grep <span class=\"hljs-literal\">yes</span>\nazureuser  138465  137535 81 20:54 pts/2    00:00:03 <span class=\"hljs-literal\">yes</span>\nazureuser  138488  137535 80 20:54 pts/2    00:00:02 <span class=\"hljs-literal\">yes</span>\nazureuser  138495  137535 95 20:55 pts/2    00:00:01 <span class=\"hljs-literal\">yes</span>\nazureuser  138573  137535  0 20:55 pts/2    00:00:00 grep <span class=\"hljs-attribute\">--color</span>=auto <span class=\"hljs-literal\">yes</span>\n</code></pre>\n<p>3 . Back in Dynatrace within the <code>host</code> view, the CPU should now be high as shown below</p>\n<p><img src=\"assets/lab4-cpu.png\" alt=\"image\" /></p>\n<p>4 . It may take a minute or so, but you will get two problem cards as shown below.  #1 is the alert from the <code>severity = RESOURCE</code> where Davis was invoked, and #2 is the alert from <code>severity = CUSTOM ALERT</code>.</p>\n<p><img src=\"assets/lab4-custom-alert-problems.png\" alt=\"image\" /></p>\n<h3 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<ul>\n<li><p>See the <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/problem-detection-and-analysis/problem-detection/metric-events-for-alerting/\">Dynatrace Docs</a> for more details on the setup.</p></li>\n<li><p>Alert configuration is available through the <a href=\"https://www.dynatrace.com/support/help/dynatrace-api/configuration-api/anomaly-detection-api/anomaly-detection-api-metric-events/\">Anomaly detection—metric events API</a>. Using the API, you can list, update, create, and delete configurations.</p></li>\n</ul>\n<h2 id=\"reviewproblemnotifications\">Review Problem Notifications</h2>\n<p>1 . Navigate to <code>Settings --&gt; Integrations --&gt; Problem Notifications</code> </p>\n<p>2 . Read the overview and then click the <code>Add Notification</code> button</p>\n<p>3 . Click various <code>Notification types</code> from the drop down to review the configurations inputs.</p>\n<p>4 . For the <code>Custom integration</code> type, review the option to customize the payload.</p>\n<p>5 . Notice how you can choose the <code>Alert profile</code>, but you only have default as an option currently</p>\n<h2 id=\"reviewalertingprofiles\">Review Alerting Profiles</h2>\n<p>1 . Navigate to <code>Settings --&gt; Alerting --&gt; Alerting profiles</code></p>\n<p>2 . Read the overview and then expand the <code>default</code> rule.</p>\n<p>3 . Now add one, by clicking on the <code>Add alerting profile</code> button</p>\n<p>4 . Review the options to choose severity rules and filters</p>\n<h2 id=\"stopthecpuproblem\">Stop the CPU problem</h2>\n<p>To stop the problem, you need to <code>kill</code> the processes.  To do this:</p>\n<p>1 . Run this command to get the process IDs:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-attribute\">ps</span> -ef | grep <span class=\"hljs-literal\">yes</span>\n</code></pre>\n<p>2 . For each process, copy the process ID and run </p>\n<pre><code class=\"hljs\">kill <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">PID</span>&gt;</span>\n</code></pre>\n<p>For example:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-comment\"># If output is this...</span>\n\n<span class=\"hljs-attribute\">azureuser</span>:~$ ps -ef | grep yes\n<span class=\"hljs-attribute\">azureuser</span>  <span class=\"hljs-number\">138465</span>  <span class=\"hljs-number\">137535</span> <span class=\"hljs-number\">81</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">54</span> pts/<span class=\"hljs-number\">2</span>    <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">03</span> yes\n<span class=\"hljs-attribute\">azureuser</span>  <span class=\"hljs-number\">138488</span>  <span class=\"hljs-number\">137535</span> <span class=\"hljs-number\">80</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">54</span> pts/<span class=\"hljs-number\">2</span>    <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">02</span> yes\n<span class=\"hljs-attribute\">azureuser</span>  <span class=\"hljs-number\">138495</span>  <span class=\"hljs-number\">137535</span> <span class=\"hljs-number\">95</span> <span class=\"hljs-number\">20</span>:<span class=\"hljs-number\">55</span> pts/<span class=\"hljs-number\">2</span>    <span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">00</span>:<span class=\"hljs-number\">01</span> yes\n\n<span class=\"hljs-comment\"># Then run...</span>\n\n<span class=\"hljs-attribute\">kill</span> <span class=\"hljs-number\">138465</span>\n<span class=\"hljs-attribute\">kill</span> <span class=\"hljs-number\">138488</span>\n<span class=\"hljs-attribute\">kill</span> <span class=\"hljs-number\">138495</span>\n</code></pre>\n<p>3 . Verify they are gone by running this again:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-attribute\">ps</span> -ef | grep <span class=\"hljs-literal\">yes</span>\n</code></pre>\n<p>4 . Verify that CPU in Dynatrace goes to normal and the problems will eventually automatically close</p>\n<p>5 . To exit the SSH session, run…</p>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">exit</span>\n</code></pre>","activityList":[]},{"id":"6.3","name":"SLOs","content":"<h2 id=\"slos\">SLOs</h2>\n<p>Dynatrace provides all the necessary real-time information that your Site-Reliability Engineering (SRE) teams need to monitor their defined objectives.</p>\n<p>An SRE team is responsible for finding good service-level indicators (SLIs) for a given service in order to closely monitor the reliable delivery of that service. SLIs can differ from one service to another, as not all services are equally critical in terms of time and error constraints.</p>\n<p>Dynatrace offers more than 2000 different metrics that are ready for use as dedicated SLIs.</p>\n<p>Each Service Level Objective (SLO) definition can be evaluated by following two result metrics:</p>\n<ul>\n<li><p><strong>SLO status:</strong> The current evaluation result of the SLO, expressed as a percentage. The semantics of this percentage (for example, 99.3% of all service requests are successful, or 99.99% of all website users are “satisfied” in terms of Apdex rating) and the target defined for this percentage are up to the SRE team.</p></li>\n<li><p><strong>SLO error budget:</strong> The remaining buffer until the defined SLO target is considered as failed. For example, if an SLO defines a 95% target and its current SLO status is evaluated as 98%, the remaining error budget is the difference between the SLO status and the SLO target.\nTwo SLOs were created for you, so review those.</p></li>\n</ul>\n<p>Here is an example custom dashboard with SLO dashboard tiles.</p>\n<p><img src=\"assets/lab2-slo-dashboard.png\" alt=\"image\" /></p>\n<h2 id=\"reviewyourenvironment\">Review your environment</h2>\n<p>From the left menu in Dynatrace, click the <code>Service Level Objective</code> option to review the two SLOs that are already setup.  Edit one of them to review the configuration.</p>\n<p><img src=\"assets/lab2-slo-list.png\" alt=\"image\" /></p>\n<h2 id=\"howthishelps\">👍 How this helps</h2>\n<p>You can review the current health status, error budgets, targets and warnings, along with the timeframe of all your SLOs on the SLOs overview page.</p>\n<p>Davis provides quick notifications on anomalies detected, along with actionable root causes. If your SLO has turned red, this is most likely because Davis has already raised a problem for the underlying metrics, showing you the root cause.</p>\n<h3 id=\"technicalnote\">💥 <strong>TECHNICAL NOTE</strong></h3>\n<p>See the <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/service-level-objectives/\">Dynatrace Docs</a> for more details on SLOs</p>","activityList":[]},{"id":"6.4","name":"Create Dashboard","content":"<h2 id=\"createdashboard\">Create Dashboard</h2>\n<p>From the left side menu in Dynatrace, pick the <code>dashboard</code> menu.</p>\n<p>On the dashboard page, click the <code>new dashboard</code> button.</p>\n<p><img src=\"assets/lab2-dashboard.png\" alt=\"image\" /></p>\n<p>Provide a dashboard name like <code>Cloud Migration Success</code></p>\n<p>On the blank dashboard page, click the settings.  Then click the <code>advanced settings</code> link to open then settings page</p>\n<p><img src=\"assets/lab2-dashboard-settings.png\" alt=\"image\" /></p>\n<p>Referring to this picture, follow these steps:</p>\n<ol>\n<li>On the settings page, click the <code>dashboard JSON</code> menu.</li>\n<li>Copy and paste the following Json content from this file into your dashboard JSON, replacing the existing JSON in the process:<ul>\n<li><a href=\"https://raw.githubusercontent.com/dt-alliances-workshops/azure-modernization-dt-orders-setup/main/learner-scripts/cloud-modernization-dashboard.json\">https://raw.githubusercontent.com/dt-alliances-workshops/azure-modernization-dt-orders-setup/main/learner-scripts/cloud-modernization-dashboard.json</a></li></ul></li>\n<li>You <strong>MUST</strong> replace the <code>owner</code> field to be the email that you logged into Dynatrace with or you will not be able to view it.</li>\n</ol>\n<p><img src=\"assets/lab2-dashboard-json.png\" alt=\"image\" /></p>\n<p>After you edit the email, then click the <code>Revert Dashboard ID</code> button.  After you click the <code>Revert Dashboard ID</code> button, click the <code>Save changes</code> button.</p>\n<p><img src=\"assets/lab3-save-dashboard.png\" alt=\"image\" /></p>\n<h2 id=\"viewdashboard\">View Dashboard</h2>\n<p>Click the <code>Cloud Migration Success</code> breadcrumb menu to go back to the dashboard page</p>\n<p><img src=\"assets/lab2-dashboard-bread.png\" alt=\"image\" /></p>\n<p>You should now see the dashboard</p>\n<p><img src=\"assets/lab2-dashboard-view.png\" alt=\"image\" /></p>\n<h2 id=\"editdashboard\">Edit Dashboard</h2>\n<p>Now you need to edit the dashboard and adjust the tiles with the SLOs and databases in your environment.</p>\n<p>On the top right of the page, click the <code>edit</code> button and then follow these steps:</p>\n<h3 id=\"editdynamicrequeststile\">Edit Dynamic requests tile</h3>\n<ol>\n<li>Click on the title of the Dynamic requests tile to open the Service properties window on the right side </li>\n<li>On the Service properties window, pick the monolith <code>frontend (monolith-frontend)</code> service</li>\n<li>Click the <code>Done</code> button</li>\n</ol>\n<p><img src=\"assets/lab2-dashboard-edit-tile.png\" alt=\"image\" /></p>\n<h3 id=\"editremainingtiles\">Edit remaining tiles</h3>\n<ol>\n<li>Repeat the same steps above for the Cloud services tile, but pick the <code>k8 frontend</code> in the Service properties window</li>\n<li>Repeat for the two SLO tiles, but pick the associated SLO from the drop down list in the SLO properties window</li>\n<li>Repeat for the two database tiles. For Cloud services application there are 3 databases, so just pick one of the database of a demo.</li>\n<li>Click the <code>Done</code> button to save the dashboard</li>\n</ol>","activityList":[]},{"id":"6.5","name":"Summary","content":"<h2 id=\"summary\">Summary</h2>\n<p>In this section, you should have completed the following:</p>\n<p>🔷 Review how Dynatrace integrates with <a href=\"https://azure.microsoft.com/en-us/services/monitor/\">Azure monitor</a></p>\n<p>🔷 Review how Azure monitor metrics can be configured as <a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/problem-detection-and-analysis/problem-detection/metric-events-for-alerting/\">Metric events for alerts</a></p>\n<p>🔷 Examine Dynatrace Service Level Objectives (SLOs)</p>\n<p>🔷 Create a custom dashboard with SLOs </p>","activityList":[]}]},{"id":"7","name":"Workshop Cleanup","content":"<h2 id=\"workshopcleanup\">Workshop Cleanup</h2>\n<p>If you plan to keep things running so you can examine the workshop a bit more please remember to do the cleanup when you are done. So, when you are ready, run this command to remove the Azure resources and Dynatrace configuration:</p>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">cd</span> ~<span class=\"hljs-string\">/azure-modernization-dt-orders-setup/provision-scripts</span>\n<span class=\"hljs-string\">./cleanup-workshop.sh</span>\n</code></pre>\n<p>The start of the script output will look like this:</p>\n<pre><code class=\"hljs\">===================================================================\nAbout to Delete Workshop resources\n===================================================================\nProceed? (y/n) : y\n\n==========================================\nDeleting workshop resources\nStarting: Fri 07 May 2021 04:35:46 AM UTC\n==========================================\n<span class=\"hljs-bullet\">...\n</span><span class=\"hljs-bullet\">...\n</span></code></pre>\n<p>Eventually when it completes - plan for 5-10 minutes - it will look like this:</p>\n<pre><code class=\"hljs\">=============================================\nDeleting workshop resources COMPLETE\nEnd: Fri 07 May 2021 04:40:40 AM UTC\n=============================================\n</code></pre>\n<h2 id=\"usedynatracetotrysomeofyourapplications\">Use Dynatrace to try some of your applications</h2>\n<p>You have a fully feature enabled 15 day Dynatrace trial, so keep using it to monitor and manage your infrastructure and applications!!</p>\n<p>Here are resources to get your started:</p>\n<ul>\n<li><a href=\"https://www.dynatrace.com/support/help/get-started/get-started-with-dynatrace-saas/\">Learn more about your tenant and install more OneAgents</a></li>\n<li><a href=\"https://www.dynatrace.com/support/help/how-to-use-dynatrace/user-management-and-sso/manage-groups-and-permissions/\">Add other users to your tenant</a></li>\n<li><a href=\"https://www.youtube.com/channel/UCcYJ-5q_AfmjQ4XTjTS0o3g\">YouTube Videos</a></li>\n<li><a href=\"https://www.dynatrace.com/services-support/#support-resources-section\">More Support resources</a></li>\n</ul>","activityList":[]}]